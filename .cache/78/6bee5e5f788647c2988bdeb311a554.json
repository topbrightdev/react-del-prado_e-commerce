{"id":"../node_modules/websocket-extensions/lib/pipeline/index.js","dependencies":[{"name":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/package.json","includedInParent":true,"mtime":1594655165833},{"name":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/websocket-extensions/package.json","includedInParent":true,"mtime":1594570878394},{"name":"./cell","loc":{"line":3,"column":21},"parent":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/websocket-extensions/lib/pipeline/index.js","resolved":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/websocket-extensions/lib/pipeline/cell.js"},{"name":"./pledge","loc":{"line":4,"column":21},"parent":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/websocket-extensions/lib/pipeline/index.js","resolved":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/websocket-extensions/lib/pipeline/pledge.js"}],"generated":{"js":"'use strict';\n\nvar Cell = require('./cell'),\n    Pledge = require('./pledge');\n\nvar Pipeline = function (sessions) {\n  this._cells = sessions.map(function (session) {\n    return new Cell(session);\n  });\n  this._stopped = {\n    incoming: false,\n    outgoing: false\n  };\n};\n\nPipeline.prototype.processIncomingMessage = function (message, callback, context) {\n  if (this._stopped.incoming) return;\n\n  this._loop('incoming', this._cells.length - 1, -1, -1, message, callback, context);\n};\n\nPipeline.prototype.processOutgoingMessage = function (message, callback, context) {\n  if (this._stopped.outgoing) return;\n\n  this._loop('outgoing', 0, this._cells.length, 1, message, callback, context);\n};\n\nPipeline.prototype.close = function (callback, context) {\n  this._stopped = {\n    incoming: true,\n    outgoing: true\n  };\n\n  var closed = this._cells.map(function (a) {\n    return a.close();\n  });\n\n  if (callback) Pledge.all(closed).then(function () {\n    callback.call(context);\n  });\n};\n\nPipeline.prototype._loop = function (direction, start, end, step, message, callback, context) {\n  var cells = this._cells,\n      n = cells.length,\n      self = this;\n\n  while (n--) cells[n].pending(direction);\n\n  var pipe = function (index, error, msg) {\n    if (index === end) return callback.call(context, error, msg);\n    cells[index][direction](error, msg, function (err, m) {\n      if (err) self._stopped[direction] = true;\n      pipe(index + step, err, m);\n    });\n  };\n\n  pipe(start, null, message);\n};\n\nmodule.exports = Pipeline;"},"sourceMaps":null,"error":null,"hash":"838f515fa9d00f07944a90eec93c15a5","cacheData":{"env":{}}}