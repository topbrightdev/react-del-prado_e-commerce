{"id":"../node_modules/websocket-driver/lib/websocket/driver/draft75.js","dependencies":[{"name":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/package.json","includedInParent":true,"mtime":1594655165833},{"name":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/websocket-driver/package.json","includedInParent":true,"mtime":1594570878394},{"name":"./base","loc":{"line":3,"column":19},"parent":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/websocket-driver/lib/websocket/driver/draft75.js","resolved":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/websocket-driver/lib/websocket/driver/base.js"},{"name":"util","loc":{"line":4,"column":19},"parent":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/websocket-driver/lib/websocket/driver/draft75.js","resolved":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/util/util.js"},{"name":"buffer","parent":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/websocket-driver/lib/websocket/driver/draft75.js","resolved":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/buffer/index.js"}],"generated":{"js":"var Buffer = require(\"buffer\").Buffer;\n'use strict';\n\nvar Base = require('./base'),\n    util = require('util');\n\nvar Draft75 = function (request, url, options) {\n  Base.apply(this, arguments);\n  this._stage = 0;\n  this.version = 'hixie-75';\n\n  this._headers.set('Upgrade', 'WebSocket');\n\n  this._headers.set('Connection', 'Upgrade');\n\n  this._headers.set('WebSocket-Origin', this._request.headers.origin);\n\n  this._headers.set('WebSocket-Location', this.url);\n};\n\nutil.inherits(Draft75, Base);\nvar instance = {\n  close: function () {\n    if (this.readyState === 3) return false;\n    this.readyState = 3;\n    this.emit('close', new Base.CloseEvent(null, null));\n    return true;\n  },\n  parse: function (chunk) {\n    if (this.readyState > 1) return;\n\n    this._reader.put(chunk);\n\n    this._reader.eachByte(function (octet) {\n      var message;\n\n      switch (this._stage) {\n        case -1:\n          this._body.push(octet);\n\n          this._sendHandshakeBody();\n\n          break;\n\n        case 0:\n          this._parseLeadingByte(octet);\n\n          break;\n\n        case 1:\n          this._length = (octet & 0x7F) + 128 * this._length;\n\n          if (this._closing && this._length === 0) {\n            return this.close();\n          } else if ((octet & 0x80) !== 0x80) {\n            if (this._length === 0) {\n              this._stage = 0;\n            } else {\n              this._skipped = 0;\n              this._stage = 2;\n            }\n          }\n\n          break;\n\n        case 2:\n          if (octet === 0xFF) {\n            this._stage = 0;\n            message = new Buffer(this._buffer).toString('utf8', 0, this._buffer.length);\n            this.emit('message', new Base.MessageEvent(message));\n          } else {\n            if (this._length) {\n              this._skipped += 1;\n              if (this._skipped === this._length) this._stage = 0;\n            } else {\n              this._buffer.push(octet);\n\n              if (this._buffer.length > this._maxLength) return this.close();\n            }\n          }\n\n          break;\n      }\n    }, this);\n  },\n  frame: function (buffer) {\n    if (this.readyState === 0) return this._queue([buffer]);\n    if (this.readyState > 1) return false;\n    if (typeof buffer !== 'string') buffer = buffer.toString();\n    var payload = new Buffer(buffer, 'utf8'),\n        frame = new Buffer(payload.length + 2);\n    frame[0] = 0x00;\n    frame[payload.length + 1] = 0xFF;\n    payload.copy(frame, 1);\n\n    this._write(frame);\n\n    return true;\n  },\n  _handshakeResponse: function () {\n    var start = 'HTTP/1.1 101 Web Socket Protocol Handshake',\n        headers = [start, this._headers.toString(), ''];\n    return new Buffer(headers.join('\\r\\n'), 'utf8');\n  },\n  _parseLeadingByte: function (octet) {\n    if ((octet & 0x80) === 0x80) {\n      this._length = 0;\n      this._stage = 1;\n    } else {\n      delete this._length;\n      delete this._skipped;\n      this._buffer = [];\n      this._stage = 2;\n    }\n  }\n};\n\nfor (var key in instance) Draft75.prototype[key] = instance[key];\n\nmodule.exports = Draft75;"},"sourceMaps":null,"error":null,"hash":"1e44fd5d8914c75b5a194d0ea1a9b9fe","cacheData":{"env":{}}}