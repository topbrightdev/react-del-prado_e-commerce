{"id":"../node_modules/sockjs/node_modules/faye-websocket/lib/faye/websocket/client.js","dependencies":[{"name":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/package.json","includedInParent":true,"mtime":1594655165833},{"name":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/sockjs/node_modules/faye-websocket/package.json","includedInParent":true,"mtime":1594306881442},{"name":"util","loc":{"line":1,"column":21},"parent":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/sockjs/node_modules/faye-websocket/lib/faye/websocket/client.js","resolved":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/util/util.js"},{"name":"net","loc":{"line":2,"column":21},"parent":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/sockjs/node_modules/faye-websocket/lib/faye/websocket/client.js","resolved":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/parcel-bundler/src/builtins/_empty.js"},{"name":"tls","loc":{"line":3,"column":21},"parent":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/sockjs/node_modules/faye-websocket/lib/faye/websocket/client.js","resolved":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/parcel-bundler/src/builtins/_empty.js"},{"name":"url","loc":{"line":4,"column":21},"parent":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/sockjs/node_modules/faye-websocket/lib/faye/websocket/client.js","resolved":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/url/url.js"},{"name":"websocket-driver","loc":{"line":5,"column":21},"parent":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/sockjs/node_modules/faye-websocket/lib/faye/websocket/client.js","resolved":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/websocket-driver/lib/websocket/driver.js"},{"name":"./api","loc":{"line":6,"column":21},"parent":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/sockjs/node_modules/faye-websocket/lib/faye/websocket/client.js","resolved":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/sockjs/node_modules/faye-websocket/lib/faye/websocket/api.js"},{"name":"./api/event","loc":{"line":7,"column":21},"parent":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/sockjs/node_modules/faye-websocket/lib/faye/websocket/client.js","resolved":"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/sockjs/node_modules/faye-websocket/lib/faye/websocket/api/event.js"}],"generated":{"js":"var util = require('util'),\n    net = require('net'),\n    tls = require('tls'),\n    url = require('url'),\n    driver = require('websocket-driver'),\n    API = require('./api'),\n    Event = require('./api/event');\n\nvar DEFAULT_PORTS = {\n  'http:': 80,\n  'https:': 443,\n  'ws:': 80,\n  'wss:': 443\n},\n    SECURE_PROTOCOLS = ['https:', 'wss:'];\n\nvar Client = function (_url, protocols, options) {\n  options = options || {};\n  this.url = _url;\n  this._driver = driver.client(this.url, {\n    maxLength: options.maxLength,\n    protocols: protocols\n  });\n  ['open', 'error'].forEach(function (event) {\n    this._driver.on(event, function () {\n      self.headers = self._driver.headers;\n      self.statusCode = self._driver.statusCode;\n    });\n  }, this);\n\n  var proxy = options.proxy || {},\n      endpoint = url.parse(proxy.origin || this.url),\n      port = endpoint.port || DEFAULT_PORTS[endpoint.protocol],\n      secure = SECURE_PROTOCOLS.indexOf(endpoint.protocol) >= 0,\n      onConnect = function () {\n    self._onConnect();\n  },\n      originTLS = options.tls || {},\n      socketTLS = proxy.origin ? proxy.tls || {} : originTLS,\n      self = this;\n\n  originTLS.ca = originTLS.ca || options.ca;\n  this._stream = secure ? tls.connect(port, endpoint.hostname, socketTLS, onConnect) : net.connect(port, endpoint.hostname, onConnect);\n  if (proxy.origin) this._configureProxy(proxy, originTLS);\n  API.call(this, options);\n};\n\nutil.inherits(Client, API);\n\nClient.prototype._onConnect = function () {\n  var worker = this._proxy || this._driver;\n  worker.start();\n};\n\nClient.prototype._configureProxy = function (proxy, originTLS) {\n  var uri = url.parse(this.url),\n      secure = SECURE_PROTOCOLS.indexOf(uri.protocol) >= 0,\n      self = this,\n      name;\n  this._proxy = this._driver.proxy(proxy.origin);\n\n  if (proxy.headers) {\n    for (name in proxy.headers) this._proxy.setHeader(name, proxy.headers[name]);\n  }\n\n  this._proxy.pipe(this._stream, {\n    end: false\n  });\n\n  this._stream.pipe(this._proxy);\n\n  this._proxy.on('connect', function () {\n    if (secure) {\n      var options = {\n        socket: self._stream,\n        servername: uri.hostname\n      };\n\n      for (name in originTLS) options[name] = originTLS[name];\n\n      self._stream = tls.connect(options);\n\n      self._configureStream();\n    }\n\n    self._driver.io.pipe(self._stream);\n\n    self._stream.pipe(self._driver.io);\n\n    self._driver.start();\n  });\n\n  this._proxy.on('error', function (error) {\n    self._driver.emit('error', error);\n  });\n};\n\nmodule.exports = Client;"},"sourceMaps":null,"error":null,"hash":"1ea5e4b4853072ceb6f63f07d1521dbf","cacheData":{"env":{}}}