{"ast":null,"code":"import _classCallCheck from \"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/store/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/store/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/store/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/store/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/store/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/store/frontEnd/src/components/products/product-listing.jsx\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { getTotal, getCartProducts } from \"../../reducers\";\nimport { addToCart, addToWishlist, addToCompare, addSelectedProducts } from \"../../actions/indexO\";\nimport { getVisibleproducts } from \"../../services/index\";\nimport ProductListItem from \"./product-list-item\";\nvar category = null;\nvar mounted = null;\n\nvar ProductListing =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ProductListing, _Component);\n\n  function ProductListing(props) {\n    var _this;\n\n    _classCallCheck(this, ProductListing);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProductListing).call(this, props));\n\n    _this.fetchSameCategoryProducts = function () {\n      if (mounted) {\n        if (_this.props.category !== _this.state.category) {\n          category = _this.props.category;\n\n          _this.setState(function () {\n            return {\n              category: category\n            };\n          });\n\n          var productsToShow = [];\n          var products = _this.props.products[0];\n\n          if (_this.props.products[1].length > 0) {\n            products = _this.props.products[0];\n          }\n\n          products.map(function (product) {\n            product.categories.map(function (productCategory) {\n              if (productCategory.name === category) {\n                productsToShow.push(product);\n              }\n            });\n          });\n        }\n\n        if (_this.state.productsToShow !== productsToShow) {\n          _this.setState(function () {\n            return {\n              productsToShow: productsToShow\n            };\n          });\n\n          _this.props.addSelectedProducts(productsToShow);\n        }\n\n        category = _this.props.category;\n      }\n    };\n\n    _this.countDone = function (products) {\n      if (mounted) {\n        _this.setState(function () {\n          return {\n            limit: _this.state.limit + 5\n          };\n        });\n\n        if (_this.state.limit >= products[0].length) {\n          _this.setState({\n            hasMoreItems: false\n          });\n        }\n      }\n    };\n\n    _this.fetchMoreItems = function (products) {\n      if (mounted) {\n        // a fake async api call\n        setTimeout(function () {\n          _this.countDone(products);\n        }, 3000);\n      }\n    };\n\n    _this.state = {\n      limit: 5,\n      hasMoreItems: true,\n      category: null,\n      productsToShow: null\n    };\n    return _this;\n  }\n\n  _createClass(ProductListing, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      mounted = null;\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      mounted = true;\n\n      if (this.props.category !== this.state.category) {\n        category = this.props.category;\n        this.setState(function () {\n          return {\n            category: category\n          };\n        });\n        this.fetchSameCategoryProducts();\n      }\n\n      var products = null;\n\n      if (this.props.data3.productsToShow) {\n        if (this.props.data3.productsToShow.length > 0) {\n          products = this.props.data3.productsToShow;\n        } else {\n          products = this.props.products;\n        }\n      } else {\n        products = this.props.products;\n      }\n\n      this.fetchMoreItems(products);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (mounted) {\n        if (this.props.category !== this.state.category) {\n          category = this.props.category;\n          this.setState(function () {\n            return {\n              category: category\n            };\n          });\n          this.fetchSameCategoryProducts();\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          products = _this$props.products,\n          addToCart = _this$props.addToCart,\n          symbol = _this$props.symbol,\n          addToWishlist = _this$props.addToWishlist,\n          addToCompare = _this$props.addToCompare;\n      var theProducts = products[0];\n\n      if (this.state.productsToShow) {\n        theProducts = this.state.productsToShow;\n      }\n\n      if (products[1].length > 0) {\n        theProducts = products[1];\n      }\n\n      if (category) {\n        if (mounted) {\n          return React.createElement(\"div\", {\n            className: \"product-wrapper-grid\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 143\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"container-fluid\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 144\n            },\n            __self: this\n          }, theProducts.length > 0 ? React.createElement(InfiniteScroll, {\n            dataLength: this.state.limit //This is important field to render the next data\n            ,\n            next: function next() {\n              _this2.fetchMoreItems(theProducts);\n            },\n            hasMore: this.state.hasMoreItems,\n            loader: React.createElement(\"div\", {\n              className: \"loading-cls\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 152\n              },\n              __self: this\n            }),\n            endMessage: React.createElement(\"p\", {\n              className: \"seen-cls seen-it-cls\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 154\n              },\n              __self: this\n            }, React.createElement(\"b\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 155\n              },\n              __self: this\n            }, \"Yay! You have seen it all\")),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 146\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"row\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 159\n            },\n            __self: this\n          }, theProducts.slice(0, this.state.limit).map(function (product, index) {\n            return React.createElement(\"div\", {\n              className: \"\".concat(_this2.props.colSize === 3 ? \"col-xl-3 col-md-6  col-grid-box ma-lr\" : \"col-lg-\" + _this2.props.colSize),\n              key: index,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 163\n              },\n              __self: this\n            }, React.createElement(ProductListItem, {\n              product: product,\n              symbol: symbol,\n              onAddToCompareClicked: function onAddToCompareClicked() {\n                return addToCompare(product);\n              },\n              onAddToWishlistClicked: function onAddToWishlistClicked() {\n                return addToWishlist(product);\n              },\n              onAddToCartClicked: addToCart,\n              key: index,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 171\n              },\n              __self: this\n            }));\n          }))) : React.createElement(\"div\", {\n            className: \"row\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 186\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"col-sm-12 text-center section-b-space mt-5 no-found\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 187\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            src: \"\".concat(process.env.PUBLIC_URL, \"/assets/images/empty-search.jpg\"),\n            className: \"img-fluid mb-4\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 188\n            },\n            __self: this\n          }), React.createElement(\"h3\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 194\n            },\n            __self: this\n          }, \"Sorry! Couldn't find the product you were looking For!!!\", \" \"), React.createElement(\"p\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 197\n            },\n            __self: this\n          }, \"Please check if you have misspelt something or try searching with other words.\"), React.createElement(Link, {\n            to: \"\".concat(process.env.PUBLIC_URL, \"/\"),\n            className: \"btn btn-solid\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 201\n            },\n            __self: this\n          }, \"continue shopping\")))));\n        }\n      } else {\n        return React.createElement(\"h6\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215\n          },\n          __self: this\n        }, \"Loading\");\n      }\n    }\n  }]);\n\n  return ProductListing;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    products: getVisibleproducts(state.data, state.filters, state.data2, state.data3),\n    data2: state.data2,\n    data3: state.data3,\n    symbol: state.data.symbol\n  };\n};\n\nexport default connect(mapStateToProps, {\n  addToCart: addToCart,\n  addToWishlist: addToWishlist,\n  addToCompare: addToCompare,\n  addSelectedProducts: addSelectedProducts\n})(ProductListing);","map":{"version":3,"sources":["/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/store/frontEnd/src/components/products/product-listing.jsx"],"names":["React","Component","connect","Link","InfiniteScroll","getTotal","getCartProducts","addToCart","addToWishlist","addToCompare","addSelectedProducts","getVisibleproducts","ProductListItem","category","mounted","ProductListing","props","fetchSameCategoryProducts","state","setState","productsToShow","products","length","map","product","categories","productCategory","name","push","countDone","limit","hasMoreItems","fetchMoreItems","setTimeout","data3","symbol","theProducts","slice","index","colSize","process","env","PUBLIC_URL","mapStateToProps","data","filters","data2"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n\r\nimport { getTotal, getCartProducts } from \"../../reducers\";\r\nimport {\r\n  addToCart,\r\n  addToWishlist,\r\n  addToCompare,\r\n  addSelectedProducts,\r\n} from \"../../actions/indexO\";\r\nimport { getVisibleproducts } from \"../../services/index\";\r\nimport ProductListItem from \"./product-list-item\";\r\n\r\nvar category = null;\r\nvar mounted = null;\r\nclass ProductListing extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      limit: 5,\r\n      hasMoreItems: true,\r\n      category: null,\r\n      productsToShow: null,\r\n    };\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    mounted = null;\r\n  }\r\n\r\n  componentWillMount() {\r\n    mounted = true;\r\n    if (this.props.category !== this.state.category) {\r\n      category = this.props.category;\r\n      this.setState(() => {\r\n        return { category: category };\r\n      });\r\n      this.fetchSameCategoryProducts();\r\n    }\r\n    var products = null;\r\n\r\n    if (this.props.data3.productsToShow) {\r\n      if (this.props.data3.productsToShow.length > 0) {\r\n        products = this.props.data3.productsToShow;\r\n      } else {\r\n        products = this.props.products;\r\n      }\r\n    } else {\r\n      products = this.props.products;\r\n    }\r\n\r\n    this.fetchMoreItems(products);\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (mounted) {\r\n      if (this.props.category !== this.state.category) {\r\n        category = this.props.category;\r\n        this.setState(() => {\r\n          return { category: category };\r\n        });\r\n        this.fetchSameCategoryProducts();\r\n      }\r\n    }\r\n  }\r\n\r\n  fetchSameCategoryProducts = () => {\r\n    if (mounted) {\r\n      if (this.props.category !== this.state.category) {\r\n        category = this.props.category;\r\n        this.setState(() => {\r\n          return { category: category };\r\n        });\r\n\r\n        var productsToShow = [];\r\n        var products = this.props.products[0];\r\n\r\n        if (this.props.products[1].length > 0) {\r\n          products = this.props.products[0];\r\n        }\r\n\r\n        products.map((product) => {\r\n          product.categories.map((productCategory) => {\r\n            if (productCategory.name === category) {\r\n              productsToShow.push(product);\r\n            }\r\n          });\r\n        });\r\n      }\r\n\r\n      if (this.state.productsToShow !== productsToShow) {\r\n        this.setState(() => {\r\n          return { productsToShow: productsToShow };\r\n        });\r\n        this.props.addSelectedProducts(productsToShow);\r\n      }\r\n      category = this.props.category;\r\n    }\r\n  };\r\n\r\n  countDone = (products) => {\r\n    if (mounted) {\r\n      this.setState(() => {\r\n        return { limit: this.state.limit + 5 };\r\n      });\r\n      if (this.state.limit >= products[0].length) {\r\n        this.setState({ hasMoreItems: false });\r\n      }\r\n    }\r\n  };\r\n\r\n  fetchMoreItems = (products) => {\r\n    if (mounted) {\r\n      // a fake async api call\r\n      setTimeout(() => {\r\n        this.countDone(products);\r\n      }, 3000);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      products,\r\n      addToCart,\r\n      symbol,\r\n      addToWishlist,\r\n      addToCompare,\r\n    } = this.props;\r\n\r\n    var theProducts = products[0];\r\n    if (this.state.productsToShow) {\r\n      theProducts = this.state.productsToShow;\r\n    }\r\n    if (products[1].length > 0) {\r\n      theProducts = products[1];\r\n    }\r\n\r\n    if (category) {\r\n      if (mounted) {\r\n        return (\r\n          <div className=\"product-wrapper-grid\">\r\n            <div className=\"container-fluid\">\r\n              {theProducts.length > 0 ? (\r\n                <InfiniteScroll\r\n                  dataLength={this.state.limit} //This is important field to render the next data\r\n                  next={() => {\r\n                    this.fetchMoreItems(theProducts);\r\n                  }}\r\n                  hasMore={this.state.hasMoreItems}\r\n                  loader={<div className=\"loading-cls\" />}\r\n                  endMessage={\r\n                    <p className=\"seen-cls seen-it-cls\">\r\n                      <b>Yay! You have seen it all</b>\r\n                    </p>\r\n                  }\r\n                >\r\n                  <div className=\"row\">\r\n                    {theProducts\r\n                      .slice(0, this.state.limit)\r\n                      .map((product, index) => (\r\n                        <div\r\n                          className={`${\r\n                            this.props.colSize === 3\r\n                              ? \"col-xl-3 col-md-6  col-grid-box ma-lr\"\r\n                              : \"col-lg-\" + this.props.colSize\r\n                          }`}\r\n                          key={index}\r\n                        >\r\n                          <ProductListItem\r\n                            product={product}\r\n                            symbol={symbol}\r\n                            onAddToCompareClicked={() => addToCompare(product)}\r\n                            onAddToWishlistClicked={() =>\r\n                              addToWishlist(product)\r\n                            }\r\n                            onAddToCartClicked={addToCart}\r\n                            key={index}\r\n                          />\r\n                        </div>\r\n                      ))}\r\n                  </div>\r\n                </InfiniteScroll>\r\n              ) : (\r\n                <div className=\"row\">\r\n                  <div className=\"col-sm-12 text-center section-b-space mt-5 no-found\">\r\n                    <img\r\n                      src={`${\r\n                        process.env.PUBLIC_URL\r\n                      }/assets/images/empty-search.jpg`}\r\n                      className=\"img-fluid mb-4\"\r\n                    />\r\n                    <h3>\r\n                      Sorry! Couldn't find the product you were looking For!!!{\" \"}\r\n                    </h3>\r\n                    <p>\r\n                      Please check if you have misspelt something or try\r\n                      searching with other words.\r\n                    </p>\r\n                    <Link\r\n                      to={`${process.env.PUBLIC_URL}/`}\r\n                      className=\"btn btn-solid\"\r\n                    >\r\n                      continue shopping\r\n                    </Link>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n    } else {\r\n      return <h6>Loading</h6>;\r\n    }\r\n  }\r\n}\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    products: getVisibleproducts(\r\n      state.data,\r\n      state.filters,\r\n      state.data2,\r\n      state.data3\r\n    ),\r\n    data2: state.data2,\r\n    data3: state.data3,\r\n    symbol: state.data.symbol,\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  {\r\n    addToCart,\r\n    addToWishlist,\r\n    addToCompare,\r\n    addSelectedProducts,\r\n  }\r\n)(ProductListing);\r\n"]},"metadata":{},"sourceType":"module"}