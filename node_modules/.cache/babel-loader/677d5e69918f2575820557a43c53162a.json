{"ast":null,"code":"import _regeneratorRuntime from \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/src/api/userWoo.js\";\nimport React, { Component } from \"react\";\nimport { createContext, useContext } from \"react\";\nvar WooContext = React.createContext();\n\nvar wooConfig = require(\"../components/wooConfig\");\n\nvar WooCommerceAPI = require(\"woocommerce-api\");\n\nvar orderModel = {\n  payment_method: \"bacs\",\n  payment_method_title: \"Direct Bank Transfer\",\n  set_paid: \"true\",\n  billing: {\n    first_name: \"John\",\n    last_name: \"Doe\",\n    address_1: \"969 Market\",\n    address_2: \"\",\n    city: \"San Francisco\",\n    state: \"CA\",\n    postcode: \"94103\",\n    country: \"US\",\n    email: \"john.doe@example.com\",\n    phone: \"(555) 555-5555\"\n  },\n  shipping: {\n    first_name: \"John\",\n    last_name: \"Doe\",\n    address_1: \"969 Market\",\n    address_2: \"\",\n    city: \"San Francisco\",\n    state: \"CA\",\n    postcode: \"94103\",\n    country: \"US\"\n  },\n  line_items: [{\n    product_id: \"93\",\n    quantity: \"2\"\n  }, {\n    product_id: \"22\",\n    variation_id: \"23\",\n    quantity: \"1\"\n  }],\n  shipping_lines: [{\n    method_id: \"flat_rate\",\n    method_title: \"Flat Rate\",\n    total: \"10\"\n  }]\n};\nvar userShared = {\n  name: null,\n  lastname: null,\n  email: null,\n  address: null,\n  city: null,\n  state: null,\n  cp: null,\n  country: null,\n  phone: null\n};\nvar userCart = {\n  cart: [{\n    product_id: null,\n    quantity: null\n  }],\n  cartSubTotal: null,\n  cartTax: null,\n  cartTotal: null\n};\nvar cartItem = {\n  product_id: null,\n  quantity: null\n};\nvar userOrder = {};\nvar ready = null;\nvar WooCommerce = new WooCommerceAPI({\n  url: \"https://grassrootemarket.com\",\n  consumerKey: wooConfig.consumerKey,\n  consumerSecret: wooConfig.consumerSecret,\n  wpAPI: true,\n  version: \"wc/v3\"\n});\n\nvar WooProvider = /*#__PURE__*/function (_Component) {\n  _inherits(WooProvider, _Component);\n\n  function WooProvider(props) {\n    var _this;\n\n    _classCallCheck(this, WooProvider);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(WooProvider).call(this, props));\n\n    _this.fillOrder = function () {\n      var _this$state = _this.state,\n          name = _this$state.name,\n          lastName = _this$state.lastName,\n          email = _this$state.email,\n          address = _this$state.address,\n          address2 = _this$state.address2,\n          city = _this$state.city,\n          state = _this$state.state,\n          cp = _this$state.cp,\n          country = _this$state.country,\n          phone = _this$state.phone,\n          cart = _this$state.cart,\n          total = _this$state.total;\n      var myCart = JSON.stringify(cart);\n\n      if (name && lastName && email && address && city && state && cp && country && phone && myCart && total) {\n        userOrder = {\n          payment_method: \"bacs\",\n          payment_method_title: \"Credit Card Payment\",\n          set_paid: \"true\",\n          billing: {\n            first_name: \"\".concat(name),\n            last_name: \"\".concat(lastName),\n            address_1: \"\".concat(address),\n            address_2: \"\".concat(address2),\n            city: \"\".concat(city),\n            state: \" \".concat(state),\n            postcode: \"\".concat(cp),\n            country: \"\".concat(country),\n            email: \"\".concat(email),\n            phone: \"\".concat(phone)\n          },\n          shipping: {\n            first_name: \"\".concat(name),\n            last_name: \"\".concat(lastName),\n            address_1: \"\".concat(address),\n            address_2: \"\".concat(address2),\n            city: \"\".concat(city),\n            state: \"\".concat(state),\n            postcode: \"\".concat(cp),\n            country: \"\".concat(country),\n            email: \"\".concat(email)\n          },\n          line_items: cart,\n          shipping_lines: [{\n            method_id: \"flat_rate\",\n            method_title: \"Flat Rate\",\n            total: \"\".concat(total)\n          }]\n        };\n        ready = true;\n      }\n    };\n\n    _this.createCustomer = function (newCustomer) {\n      if (!_this.state.email) {\n        var data = {\n          user_display_name: newCustomer.username,\n          user_email: newCustomer.email\n        };\n\n        _this.receiveLogin(data);\n      }\n\n      _this.getCustomerId(newCustomer);\n    };\n\n    _this.getCustomerId = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(newCustomer) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return WooCommerce.getAsync(\"customers?email=\".concat(newCustomer.email)).then(function (response) {\n                  if (response) {\n                    if (response.body) {\n                      var user = JSON.parse(response.body);\n                      var userId = user[0].id;\n\n                      _this.setState(function () {\n                        return _objectSpread({}, {\n                          userId: userId\n                        });\n                      });\n\n                      _this.updateCustomer(userId, newCustomer);\n                    }\n                  }\n                }).catch(function (error) {});\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.createOrder = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this.fillOrder();\n\n              if (!ready) {\n                _context2.next = 4;\n                break;\n              }\n\n              _context2.next = 4;\n              return WooCommerce.postAsync(\"orders\", userOrder).then(function (response) {}).catch(function (error) {});\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    _this.fillCustomer = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(email) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return WooCommerce.getAsync(\"customers?email=\".concat(email)).then(function (response) {\n                  if (response) {\n                    if (response.body) {\n                      var res = JSON.parse(response.body);\n                      var user = res[0];\n                      console.log(user);\n\n                      _this.setState(function () {\n                        return _objectSpread({}, {\n                          userId: user.id,\n                          company: user.billing.company,\n                          name: user.billing.first_name,\n                          lastName: user.billing.last_name,\n                          address: user.billing.address_1,\n                          address2: user.billing.address_2,\n                          city: user.billing.city,\n                          state: user.billing.state,\n                          cp: user.billing.postcode,\n                          country: user.billing.country,\n                          phone: user.billing.phone\n                        });\n                      });\n                    }\n                  }\n                }).catch(function (error) {\n                  console.log(error);\n                });\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    _this.receiveLogin = function (data) {\n      console.log(data);\n\n      _this.setState(function () {\n        return _objectSpread({}, {\n          user: data.user_display_name,\n          email: data.user_email\n        });\n      });\n\n      _this.fillCustomer(data.user_email); // Also must to retrieve from wooApi the rest of information\n      // about the logged user and populate its state\n\n    };\n\n    _this.receiveLogout = function (data) {\n      _this.setState(function () {\n        return _objectSpread({}, {\n          user: null,\n          order: null,\n          name: null,\n          lastName: null,\n          email: null,\n          address: null,\n          address2: null,\n          city: null,\n          state: null,\n          cp: null,\n          country: null,\n          phone: null,\n          cart: null,\n          cartSubTotal: null,\n          cartTax: null,\n          total: null\n        });\n      }); // Also must to retrieve from wooApi the rest of information\n      // about the logged user and populate its state\n\n    };\n\n    _this.receiveSignup = function (data) {\n      var user = data.user;\n      var ship = data.shipping;\n\n      _this.setState(function () {\n        return _objectSpread({}, {\n          name: user.user_display_name,\n          email: user.user_email,\n          phone: ship.phone,\n          address: ship.street,\n          address2: ship.address2,\n          city: ship.city,\n          state: ship.province,\n          cp: ship.postal,\n          country: ship.country\n        });\n      });\n    };\n\n    _this.receiveForm = function (data) {};\n\n    _this.receiveReceipt = function (data) {\n      _this.setState(function () {\n        return _objectSpread({}, {\n          receipt: data\n        });\n      });\n\n      _this.createOrder();\n    };\n\n    _this.receiveCart = function (data) {\n      var receivedCart = [];\n      var total = null;\n\n      if (data.cart) {\n        if (!data.cart[0]) {\n          //If I empty the cart should clean the state\n          _this.setState(function () {\n            return _objectSpread({}, {\n              cart: null,\n              total: null\n            });\n          });\n        } else {\n          data.cart.map(function (i) {\n            var totalItem = i.price * i.count;\n            total = total + totalItem;\n            var receivedItem = {\n              product_id: i.id,\n              quantity: i.count\n            };\n            receivedCart.push(receivedItem);\n\n            _this.setState(function () {\n              return _objectSpread({}, {\n                cart: receivedCart,\n                total: total\n              });\n            });\n          });\n        }\n      }\n    };\n\n    _this.state = {\n      user: null,\n      userId: null,\n      order: null,\n      name: null,\n      company: null,\n      lastName: null,\n      email: null,\n      address: null,\n      address2: null,\n      city: null,\n      state: null,\n      cp: null,\n      country: null,\n      phone: null,\n      cart: null,\n      cartSubTotal: null,\n      cartTax: null,\n      total: null\n    };\n    _this.getCustomerId = _this.getCustomerId.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.fillCustomer = _this.fillCustomer.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(WooProvider, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var cart = [{\n        product_id: \"93\",\n        quantity: \"2\"\n      }, {\n        product_id: \"22\",\n        variation_id: \"23\",\n        quantity: \"1\"\n      }];\n      var myJSON = JSON.stringify(cart);\n    }\n  }, {\n    key: \"updateAccount\",\n    value: function () {\n      var _updateAccount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(id, updatedUser, updatedShipping) {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                // First will check if user values must be modified : name /mail\n                // Check\n                console.log(id);\n                console.log(updatedUser);\n                console.log(updatedShipping);\n\n                if (!updatedUser) {\n                  _context4.next = 6;\n                  break;\n                }\n\n                _context4.next = 6;\n                return axios.post(\"https://grassrootemarket.com/wp-json/wp/v2/users/\".concat(id), {\n                  username: updatedUser.userName,\n                  mail: updatedUser.email\n                }).then(function (result) {\n                  if (result.status === 200) {\n                    console.log(result);\n                  } else {\n                    alert(\"error\");\n                  }\n                }).catch(function (e) {\n                  setIsError(true);\n                });\n\n              case 6:\n                if (!updatedShipping) {\n                  _context4.next = 9;\n                  break;\n                }\n\n                _context4.next = 9;\n                return WooCommerce.putAsync(\"customers/\".concat(id), updatedShipping).then(function (response) {\n                  var customer = JSON.parse(response.body);\n                  console.log(customer);\n                }).catch(function (error) {});\n\n              case 9:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      function updateAccount(_x3, _x4, _x5) {\n        return _updateAccount.apply(this, arguments);\n      }\n\n      return updateAccount;\n    }()\n  }, {\n    key: \"updateCustomer\",\n    value: function () {\n      var _updateCustomer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(id, newCustomer) {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                console.log(id);\n                console.log(newCustomer);\n                _context5.next = 4;\n                return WooCommerce.putAsync(\"customers/\".concat(id), newCustomer).then(function (response) {\n                  var customer = JSON.parse(response.body);\n                  console.log(customer);\n                }).catch(function (error) {});\n\n              case 4:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      function updateCustomer(_x6, _x7) {\n        return _updateCustomer.apply(this, arguments);\n      }\n\n      return updateCustomer;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(WooContext.Provider, {\n        value: _objectSpread({}, this.state, {\n          userData: this.state,\n          receiveLogin: this.receiveLogin,\n          receiveLogout: this.receiveLogout,\n          receiveSignup: this.receiveSignup,\n          updateCustomer: this.updateCustomer,\n          createCustomer: this.createCustomer,\n          receiveForm: this.receiveForm,\n          createOrder: this.createOrder,\n          receiveCart: this.receiveCart,\n          receiveReceipt: this.receiveReceipt\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 7\n        }\n      }, \" \", this.props.children, \" \");\n    }\n  }]);\n\n  return WooProvider;\n}(Component);\n\nvar WooConsumer = WooContext.Consumer;\nexport { WooProvider, WooConsumer };\nexport function useWoo() {\n  return useContext(WooContext);\n}\nexport default WooContext;","map":{"version":3,"sources":["/home/jarri/Desktop/projects-web/eCommerce/template-store1/src/api/userWoo.js"],"names":["React","Component","createContext","useContext","WooContext","wooConfig","require","WooCommerceAPI","orderModel","payment_method","payment_method_title","set_paid","billing","first_name","last_name","address_1","address_2","city","state","postcode","country","email","phone","shipping","line_items","product_id","quantity","variation_id","shipping_lines","method_id","method_title","total","userShared","name","lastname","address","cp","userCart","cart","cartSubTotal","cartTax","cartTotal","cartItem","userOrder","ready","WooCommerce","url","consumerKey","consumerSecret","wpAPI","version","WooProvider","props","fillOrder","lastName","address2","myCart","JSON","stringify","createCustomer","newCustomer","data","user_display_name","username","user_email","receiveLogin","getCustomerId","getAsync","then","response","body","user","parse","userId","id","setState","updateCustomer","catch","error","createOrder","postAsync","fillCustomer","res","console","log","company","receiveLogout","order","receiveSignup","ship","street","province","postal","receiveForm","receiveReceipt","receipt","receiveCart","receivedCart","map","i","totalItem","price","count","receivedItem","push","bind","myJSON","updatedUser","updatedShipping","axios","post","userName","mail","result","status","alert","e","setIsError","putAsync","customer","userData","children","WooConsumer","Consumer","useWoo"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport {createContext, useContext} from \"react\";\nconst WooContext = React.createContext();\n\nconst wooConfig = require(\"../components/wooConfig\");\nconst WooCommerceAPI = require(\"woocommerce-api\");\n\nconst orderModel = {\n  payment_method: \"bacs\",\n  payment_method_title: \"Direct Bank Transfer\",\n  set_paid: \"true\",\n  billing: {\n    first_name: \"John\",\n    last_name: \"Doe\",\n    address_1: \"969 Market\",\n    address_2: \"\",\n    city: \"San Francisco\",\n    state: \"CA\",\n    postcode: \"94103\",\n    country: \"US\",\n    email: \"john.doe@example.com\",\n    phone: \"(555) 555-5555\",\n  },\n  shipping: {\n    first_name: \"John\",\n    last_name: \"Doe\",\n    address_1: \"969 Market\",\n    address_2: \"\",\n    city: \"San Francisco\",\n    state: \"CA\",\n    postcode: \"94103\",\n    country: \"US\",\n  },\n  line_items: [\n    {\n      product_id: \"93\",\n      quantity: \"2\",\n    },\n    {\n      product_id: \"22\",\n      variation_id: \"23\",\n      quantity: \"1\",\n    },\n  ],\n  shipping_lines: [\n    {\n      method_id: \"flat_rate\",\n      method_title: \"Flat Rate\",\n      total: \"10\",\n    },\n  ],\n};\n\nvar userShared = {\n  name: null,\n  lastname: null,\n  email: null,\n  address: null,\n  city: null,\n  state: null,\n  cp: null,\n  country: null,\n  phone: null,\n};\n\nvar userCart = {\n  cart: [\n    {\n      product_id: null,\n      quantity: null,\n    },\n  ],\n  cartSubTotal: null,\n  cartTax: null,\n  cartTotal: null,\n};\n\nvar cartItem = {\n  product_id: null,\n  quantity: null,\n};\n\nvar userOrder = {};\n\nvar ready = null;\n\nconst WooCommerce = new WooCommerceAPI({\n  url: \"https://grassrootemarket.com\",\n  consumerKey: wooConfig.consumerKey,\n  consumerSecret: wooConfig.consumerSecret,\n  wpAPI: true,\n  version: \"wc/v3\",\n});\n\nclass WooProvider extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: null,\n      userId: null,\n      order: null,\n      name: null,\n      company: null,\n      lastName: null,\n      email: null,\n      address: null,\n      address2: null,\n      city: null,\n      state: null,\n      cp: null,\n      country: null,\n      phone: null,\n      cart: null,\n      cartSubTotal: null,\n      cartTax: null,\n      total: null,\n    };\n    this.getCustomerId = this.getCustomerId.bind(this);\n    this.fillCustomer = this.fillCustomer.bind(this);\n  }\n\n  fillOrder = () => {\n    const {\n      name,\n      lastName,\n      email,\n      address,\n      address2,\n      city,\n      state,\n      cp,\n      country,\n      phone,\n      cart,\n      total,\n    } = this.state;\n\n    const myCart = JSON.stringify(cart);\n\n    if (\n      name &&\n      lastName &&\n      email &&\n      address &&\n      city &&\n      state &&\n      cp &&\n      country &&\n      phone &&\n      myCart &&\n      total\n    ) {\n      userOrder = {\n        payment_method: \"bacs\",\n        payment_method_title: \"Credit Card Payment\",\n        set_paid: \"true\",\n        billing: {\n          first_name: `${name}`,\n          last_name: `${lastName}`,\n          address_1: `${address}`,\n          address_2: `${address2}`,\n          city: `${city}`,\n          state: ` ${state}`,\n          postcode: `${cp}`,\n          country: `${country}`,\n          email: `${email}`,\n          phone: `${phone}`,\n        },\n        shipping: {\n          first_name: `${name}`,\n          last_name: `${lastName}`,\n          address_1: `${address}`,\n          address_2: `${address2}`,\n          city: `${city}`,\n          state: `${state}`,\n          postcode: `${cp}`,\n          country: `${country}`,\n          email: `${email}`,\n        },\n        line_items: cart,\n        shipping_lines: [\n          {\n            method_id: \"flat_rate\",\n            method_title: \"Flat Rate\",\n            total: `${total}`,\n          },\n        ],\n      };\n      ready = true;\n    }\n  };\n\n  componentDidMount() {\n    const cart = [\n      {\n        product_id: \"93\",\n        quantity: \"2\",\n      },\n      {\n        product_id: \"22\",\n        variation_id: \"23\",\n        quantity: \"1\",\n      },\n    ];\n\n    var myJSON = JSON.stringify(cart);\n  }\n\n  createCustomer = (newCustomer) => {\n    if (!this.state.email) {\n      const data = {\n        user_display_name: newCustomer.username,\n        user_email: newCustomer.email,\n      };\n      this.receiveLogin(data);\n    }\n    this.getCustomerId(newCustomer);\n  };\n\n  async updateAccount(id, updatedUser, updatedShipping) {\n    // First will check if user values must be modified : name /mail\n    // Check\n    console.log(id);\n    console.log(updatedUser);\n    console.log(updatedShipping);\n\n    if (updatedUser) {\n      await axios\n        .post(`https://grassrootemarket.com/wp-json/wp/v2/users/${id}`, {\n          username: updatedUser.userName,\n          mail: updatedUser.email,\n        })\n        .then((result) => {\n          if (result.status === 200) {\n            console.log(result);\n          } else {\n            alert(\"error\");\n          }\n        })\n        .catch((e) => {\n          setIsError(true);\n        });\n    }\n\n    if (updatedShipping) {\n      await WooCommerce.putAsync(`customers/${id}`, updatedShipping)\n        .then((response) => {\n          const customer = JSON.parse(response.body);\n          console.log(customer);\n        })\n        .catch((error) => {});\n    }\n  }\n\n  async updateCustomer(id, newCustomer) {\n    console.log(id);\n    console.log(newCustomer);\n    await WooCommerce.putAsync(`customers/${id}`, newCustomer)\n      .then((response) => {\n        const customer = JSON.parse(response.body);\n        console.log(customer);\n      })\n      .catch((error) => {});\n  }\n\n  getCustomerId = async (newCustomer) => {\n    await WooCommerce.getAsync(`customers?email=${newCustomer.email}`)\n      .then((response) => {\n        if (response) {\n          if (response.body) {\n            const user = JSON.parse(response.body);\n            const userId = user[0].id;\n            this.setState(() => {\n              return {\n                ...{\n                  userId: userId,\n                },\n              };\n            });\n            this.updateCustomer(userId, newCustomer);\n          }\n        }\n      })\n      .catch((error) => {});\n  };\n\n  createOrder = async () => {\n    this.fillOrder();\n    if (ready) {\n      await WooCommerce.postAsync(\"orders\", userOrder)\n        .then((response) => {})\n        .catch((error) => {});\n    }\n  };\n\n  fillCustomer = async (email) => {\n    await WooCommerce.getAsync(`customers?email=${email}`)\n      .then((response) => {\n        if (response) {\n          if (response.body) {\n            const res = JSON.parse(response.body);\n            const user = res[0];\n            console.log(user);\n            this.setState(() => {\n              return {\n                ...{\n                  userId: user.id,\n                  company: user.billing.company,\n                  name: user.billing.first_name,\n                  lastName: user.billing.last_name,\n                  address: user.billing.address_1,\n                  address2: user.billing.address_2,\n                  city: user.billing.city,\n                  state: user.billing.state,\n                  cp: user.billing.postcode,\n                  country: user.billing.country,\n                  phone: user.billing.phone,\n                },\n              };\n            });\n          }\n        }\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  receiveLogin = (data) => {\n    console.log(data);\n    this.setState(() => {\n      return {\n        ...{\n          user: data.user_display_name,\n          email: data.user_email,\n        },\n      };\n    });\n    this.fillCustomer(data.user_email);\n    // Also must to retrieve from wooApi the rest of information\n    // about the logged user and populate its state\n  };\n\n  receiveLogout = (data) => {\n    this.setState(() => {\n      return {\n        ...{\n          user: null,\n          order: null,\n          name: null,\n          lastName: null,\n          email: null,\n          address: null,\n          address2: null,\n          city: null,\n          state: null,\n          cp: null,\n          country: null,\n          phone: null,\n          cart: null,\n          cartSubTotal: null,\n          cartTax: null,\n          total: null,\n        },\n      };\n    });\n    // Also must to retrieve from wooApi the rest of information\n    // about the logged user and populate its state\n  };\n\n  receiveSignup = (data) => {\n    const user = data.user;\n    const ship = data.shipping;\n    this.setState(() => {\n      return {\n        ...{\n          name: user.user_display_name,\n          email: user.user_email,\n          phone: ship.phone,\n          address: ship.street,\n          address2: ship.address2,\n          city: ship.city,\n          state: ship.province,\n          cp: ship.postal,\n          country: ship.country,\n        },\n      };\n    });\n  };\n\n  receiveForm = (data) => {};\n\n  receiveReceipt = (data) => {\n    this.setState(() => {\n      return {\n        ...{\n          receipt: data,\n        },\n      };\n    });\n    this.createOrder();\n  };\n\n  receiveCart = (data) => {\n    var receivedCart = [];\n    var total = null;\n    if (data.cart) {\n      if (!data.cart[0]) {\n        //If I empty the cart should clean the state\n        this.setState(() => {\n          return {\n            ...{\n              cart: null,\n              total: null,\n            },\n          };\n        });\n      } else {\n        data.cart.map((i) => {\n          var totalItem = i.price * i.count;\n          total = total + totalItem;\n          var receivedItem = {\n            product_id: i.id,\n            quantity: i.count,\n          };\n          receivedCart.push(receivedItem);\n          this.setState(() => {\n            return {\n              ...{\n                cart: receivedCart,\n                total: total,\n              },\n            };\n          });\n        });\n      }\n    }\n  };\n\n  render() {\n    return (\n      <WooContext.Provider\n        value={{\n          ...this.state,\n          userData: this.state,\n          receiveLogin: this.receiveLogin,\n          receiveLogout: this.receiveLogout,\n          receiveSignup: this.receiveSignup,\n          updateCustomer: this.updateCustomer,\n          createCustomer: this.createCustomer,\n          receiveForm: this.receiveForm,\n          createOrder: this.createOrder,\n          receiveCart: this.receiveCart,\n          receiveReceipt: this.receiveReceipt,\n        }}\n      >\n        {\" \"}\n        {this.props.children}{\" \"}\n      </WooContext.Provider>\n    );\n  }\n}\n\nconst WooConsumer = WooContext.Consumer;\nexport {WooProvider, WooConsumer};\n\nexport function useWoo() {\n  return useContext(WooContext);\n}\n\nexport default WooContext;\n"]},"metadata":{},"sourceType":"module"}