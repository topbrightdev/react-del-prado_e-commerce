{"ast":null,"code":"import _toConsumableArray from \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport { ADD_TO_CART, REMOVE_FROM_CART, INCREMENT_QTY, DECREMENT_QTY } from \"../constants/ActionTypes\";\nexport default function cartReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    cart: []\n  };\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ADD_TO_CART:\n      var productId = action.product.id;\n\n      if (state.cart.findIndex(function (product) {\n        return product.id === productId;\n      }) !== -1) {\n        var cart = state.cart.reduce(function (cartAcc, product) {\n          if (product.id === productId) {\n            var thisPrice = parseInt(product.price);\n            var thisDiscount = parseInt(product.discount); //parseInt(cartItems[i].qty, 10) *\n            // parseInt((cartItems[i].price * cartItems[i].discount) / 100, 10);\n\n            thisDiscount = thisPrice * thisDiscount / 100;\n            thisPrice -= thisDiscount;\n            var thisTotal = thisPrice * product.qty;\n            thisTotal = parseInt(thisTotal.toFixed(2));\n            console.log(thisTotal);\n            cartAcc.push(_objectSpread({}, product, {\n              qty: product.qty + 1,\n              sum: thisTotal\n            })); // Increment qty\n          } else {\n            cartAcc.push(product);\n          }\n\n          return cartAcc;\n        }, []);\n        return _objectSpread({}, state, {\n          cart: cart\n        });\n      }\n\n      return _objectSpread({}, state, {\n        cart: [].concat(_toConsumableArray(state.cart), [_objectSpread({}, action.product, {\n          qty: action.qty,\n          sum: action.product.price * action.product.discount / 100 * action.qty\n        })])\n      });\n\n    case DECREMENT_QTY:\n      if (state.cart.findIndex(function (product) {\n        return product.id === action.productId;\n      }) !== -1) {\n        var _cart = state.cart.reduce(function (cartAcc, product) {\n          if (product.id === action.productId && product.qty > 1) {\n            //console.log('price: '+product.price+'Qty: '+product.qty)\n            cartAcc.push(_objectSpread({}, product, {\n              qty: product.qty - 1,\n              sum: product.price * product.discount / 100 * (product.qty - 1)\n            })); // Decrement qty\n          } else {\n            cartAcc.push(product);\n          }\n\n          return cartAcc;\n        }, []);\n\n        return _objectSpread({}, state, {\n          cart: _cart\n        });\n      }\n\n      return _objectSpread({}, state, {\n        cart: [].concat(_toConsumableArray(state.cart), [_objectSpread({}, action.product, {\n          qty: action.qty,\n          sum: action.product.price * action.qty\n        })])\n      });\n\n    case REMOVE_FROM_CART:\n      return {\n        cart: state.cart.filter(function (item) {\n          return item.id !== action.product_id.id;\n        })\n      };\n\n    default:\n  }\n\n  return state;\n}","map":{"version":3,"sources":["/home/jarri/Desktop/projects-web/eCommerce/template-store1/src/reducers/cart.js"],"names":["ADD_TO_CART","REMOVE_FROM_CART","INCREMENT_QTY","DECREMENT_QTY","cartReducer","state","cart","action","type","productId","product","id","findIndex","reduce","cartAcc","thisPrice","parseInt","price","thisDiscount","discount","thisTotal","qty","toFixed","console","log","push","sum","filter","item","product_id"],"mappings":"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","sourcesContent":["import {\r\n  ADD_TO_CART,\r\n  REMOVE_FROM_CART,\r\n  INCREMENT_QTY,\r\n  DECREMENT_QTY,\r\n} from \"../constants/ActionTypes\";\r\n\r\nexport default function cartReducer(\r\n  state = {\r\n    cart: [],\r\n  },\r\n  action\r\n) {\r\n  switch (action.type) {\r\n    case ADD_TO_CART:\r\n      const productId = action.product.id;\r\n      if (state.cart.findIndex((product) => product.id === productId) !== -1) {\r\n        const cart = state.cart.reduce((cartAcc, product) => {\r\n          if (product.id === productId) {\r\n            var thisPrice = parseInt(product.price);\r\n            var thisDiscount = parseInt(product.discount);\r\n\r\n            //parseInt(cartItems[i].qty, 10) *\r\n            // parseInt((cartItems[i].price * cartItems[i].discount) / 100, 10);\r\n            thisDiscount = (thisPrice * thisDiscount) / 100;\r\n            thisPrice -= thisDiscount;\r\n            var thisTotal = thisPrice * product.qty;\r\n            thisTotal = parseInt(thisTotal.toFixed(2));\r\n            console.log(thisTotal);\r\n            cartAcc.push({\r\n              ...product,\r\n              qty: product.qty + 1,\r\n              sum: thisTotal,\r\n            }); // Increment qty\r\n          } else {\r\n            cartAcc.push(product);\r\n          }\r\n\r\n          return cartAcc;\r\n        }, []);\r\n\r\n        return {...state, cart};\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        cart: [\r\n          ...state.cart,\r\n          {\r\n            ...action.product,\r\n            qty: action.qty,\r\n            sum:\r\n              ((action.product.price * action.product.discount) / 100) *\r\n              action.qty,\r\n          },\r\n        ],\r\n      };\r\n\r\n    case DECREMENT_QTY:\r\n      if (\r\n        state.cart.findIndex((product) => product.id === action.productId) !==\r\n        -1\r\n      ) {\r\n        const cart = state.cart.reduce((cartAcc, product) => {\r\n          if (product.id === action.productId && product.qty > 1) {\r\n            //console.log('price: '+product.price+'Qty: '+product.qty)\r\n            cartAcc.push({\r\n              ...product,\r\n              qty: product.qty - 1,\r\n              sum:\r\n                ((product.price * product.discount) / 100) * (product.qty - 1),\r\n            }); // Decrement qty\r\n          } else {\r\n            cartAcc.push(product);\r\n          }\r\n\r\n          return cartAcc;\r\n        }, []);\r\n\r\n        return {...state, cart};\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        cart: [\r\n          ...state.cart,\r\n          {\r\n            ...action.product,\r\n            qty: action.qty,\r\n            sum: action.product.price * action.qty,\r\n          },\r\n        ],\r\n      };\r\n\r\n    case REMOVE_FROM_CART:\r\n      return {\r\n        cart: state.cart.filter((item) => item.id !== action.product_id.id),\r\n      };\r\n\r\n    default:\r\n  }\r\n  return state;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}