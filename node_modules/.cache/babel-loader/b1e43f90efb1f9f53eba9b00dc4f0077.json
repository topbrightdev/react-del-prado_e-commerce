{"ast":null,"code":"import _objectSpread from \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this;\n\nvar wooConfig = require(\"./wooConfig\");\n\nvar WooCommerceAPI = require(\"woocommerce-api\");\n\nvar WooCommerce = new WooCommerceAPI({\n  url: wooConfig.siteUrl,\n  consumerKey: wooConfig.consumerKey,\n  consumerSecret: wooConfig.consumerSecret,\n  wpAPI: true,\n  version: \"wc/v3\"\n});\n\nvar test = function test() {\n  return WooCommerce.getAsync(\"products/categories?hide_empty=false&per_page=100\").then(function (res) {\n    var data = res.toJSON().body;\n    Object.json1 = JSON.parse(data);\n    var items = Object.json1;\n    return items;\n  });\n};\n\ncreateOrder = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _this.fillOrder();\n\n            if (!ready) {\n              _context.next = 4;\n              break;\n            }\n\n            _context.next = 4;\n            return WooCommerce.postAsync(\"orders\", userOrder).then(function (response) {}).catch(function (error) {});\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function createOrder() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nfillCustomer = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(email) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return WooCommerce.getAsync(\"customers?email=\".concat(email)).then(function (response) {\n              if (response) {\n                if (response.body) {\n                  var res = JSON.parse(response.body);\n                  var user = res[0];\n                  console.log(user);\n\n                  _this.setState(function () {\n                    return _objectSpread({}, {\n                      userId: user.id,\n                      company: user.billing.company,\n                      name: user.billing.first_name,\n                      lastName: user.billing.last_name,\n                      address: user.billing.address_1,\n                      address2: user.billing.address_2,\n                      city: user.billing.city,\n                      state: user.billing.state,\n                      cp: user.billing.postcode,\n                      country: user.billing.country,\n                      phone: user.billing.phone\n                    });\n                  });\n                }\n              }\n            }).catch(function (error) {\n              console.log(error);\n            });\n\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function fillCustomer(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar receiveReceipt = function receiveReceipt(data) {\n  _this.setState(function () {\n    return _objectSpread({}, {\n      receipt: data\n    });\n  });\n\n  _this.createOrder();\n};\n\nvar receiveCart = function receiveCart(data) {\n  var receivedCart = [];\n  var total = null;\n\n  if (data.cart) {\n    if (!data.cart[0]) {\n      //If I empty the cart should clean the state\n      _this.setState(function () {\n        return _objectSpread({}, {\n          cart: null,\n          total: null\n        });\n      });\n    } else {\n      data.cart.map(function (i) {\n        var totalItem = i.price * i.count;\n        total = total + totalItem;\n        var receivedItem = {\n          product_id: i.id,\n          quantity: i.count\n        };\n        receivedCart.push(receivedItem);\n\n        _this.setState(function () {\n          return _objectSpread({}, {\n            cart: receivedCart,\n            total: total\n          });\n        });\n      });\n    }\n  }\n};\n\nexport default {\n  test: test\n};","map":{"version":3,"sources":["/home/jarri/Desktop/projects-web/eCommerce/template-store1/src/api/woo.js"],"names":["wooConfig","require","WooCommerceAPI","WooCommerce","url","siteUrl","consumerKey","consumerSecret","wpAPI","version","test","getAsync","then","res","data","toJSON","body","Object","json1","JSON","parse","items","createOrder","fillOrder","ready","postAsync","userOrder","response","catch","error","fillCustomer","email","user","console","log","setState","userId","id","company","billing","name","first_name","lastName","last_name","address","address_1","address2","address_2","city","state","cp","postcode","country","phone","receiveReceipt","receipt","receiveCart","receivedCart","total","cart","map","i","totalItem","price","count","receivedItem","product_id","quantity","push"],"mappings":"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","sourcesContent":["const wooConfig = require(\"./wooConfig\");\nconst WooCommerceAPI = require(\"woocommerce-api\");\n\nconst WooCommerce = new WooCommerceAPI({\n  url: wooConfig.siteUrl,\n  consumerKey: wooConfig.consumerKey,\n  consumerSecret: wooConfig.consumerSecret,\n  wpAPI: true,\n  version: \"wc/v3\",\n});\n\nconst test = () => {\n  return WooCommerce.getAsync(\n    `products/categories?hide_empty=false&per_page=100`\n  ).then((res) => {\n    var data = res.toJSON().body;\n    Object.json1 = JSON.parse(data);\n    var items = Object.json1;\n    return items;\n  });\n};\n\ncreateOrder = async () => {\n  this.fillOrder();\n  if (ready) {\n    await WooCommerce.postAsync(\"orders\", userOrder)\n      .then((response) => {})\n      .catch((error) => {});\n  }\n};\n\nfillCustomer = async (email) => {\n  await WooCommerce.getAsync(`customers?email=${email}`)\n    .then((response) => {\n      if (response) {\n        if (response.body) {\n          const res = JSON.parse(response.body);\n          const user = res[0];\n          console.log(user);\n          this.setState(() => {\n            return {\n              ...{\n                userId: user.id,\n                company: user.billing.company,\n                name: user.billing.first_name,\n                lastName: user.billing.last_name,\n                address: user.billing.address_1,\n                address2: user.billing.address_2,\n                city: user.billing.city,\n                state: user.billing.state,\n                cp: user.billing.postcode,\n                country: user.billing.country,\n                phone: user.billing.phone,\n              },\n            };\n          });\n        }\n      }\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n};\n\nconst receiveReceipt = (data) => {\n  this.setState(() => {\n    return {\n      ...{\n        receipt: data,\n      },\n    };\n  });\n  this.createOrder();\n};\n\nconst receiveCart = (data) => {\n  var receivedCart = [];\n  var total = null;\n  if (data.cart) {\n    if (!data.cart[0]) {\n      //If I empty the cart should clean the state\n      this.setState(() => {\n        return {\n          ...{\n            cart: null,\n            total: null,\n          },\n        };\n      });\n    } else {\n      data.cart.map((i) => {\n        var totalItem = i.price * i.count;\n        total = total + totalItem;\n        var receivedItem = {\n          product_id: i.id,\n          quantity: i.count,\n        };\n        receivedCart.push(receivedItem);\n        this.setState(() => {\n          return {\n            ...{\n              cart: receivedCart,\n              total: total,\n            },\n          };\n        });\n      });\n    }\n  }\n};\n\nexport default {\n  test,\n};\n"]},"metadata":{},"sourceType":"module"}