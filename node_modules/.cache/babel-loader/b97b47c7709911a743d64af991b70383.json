{"ast":null,"code":"import _objectSpread from \"/home/jarri/Desktop/projects-web/react-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/jarri/Desktop/projects-web/react-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/jarri/Desktop/projects-web/react-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/jarri/Desktop/projects-web/react-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/jarri/Desktop/projects-web/react-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/jarri/Desktop/projects-web/react-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/jarri/Desktop/projects-web/react-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/jarri/Desktop/projects-web/react-store/src/api/shop.js\";\nimport React, { Component } from \"react\";\nimport { useContext } from \"react\";\nimport _products from \"./data.json\";\n\nvar wooConfig = require(\"./wooConfig\");\n\nvar WooCommerceAPI = require(\"woocommerce-api\");\n/**\n * Mocking client-server processing\n */\n\n\nvar TIMEOUT = 100;\nexport default {\n  //getProducts: (cb, timeout) =>\n  // setTimeout(() => cb(_products), timeout || TIMEOUT),\n  getProducts: function getProducts(res) {\n    var _this = this;\n\n    WooCommerce.getAsync(\"products?\").then(function (res) {\n      return res.toJSON().body;\n    }).then(function (json) {\n      var data = json;\n      Object.json1 = JSON.parse(data);\n      var items = Object.json1;\n      var products = [];\n      items.map(function (_ref) {\n        var id = _ref.id,\n            name = _ref.name,\n            images = _ref.images,\n            price = _ref.price,\n            categories = _ref.categories,\n            description = _ref.description,\n            stock_quantity = _ref.stock_quantity;\n        var img;\n        images.map(function (data) {\n          img = data.src;\n        });\n        var newItem = {\n          id: id,\n          title: name,\n          img: img,\n          price: parseInt(price),\n          company: \"nurumia\",\n          info: description,\n          inCart: null,\n          count: 1,\n          total: 1,\n          categories: categories,\n          stock: stock_quantity\n        };\n        products.push(newItem); // Push the object\n\n        _this.oldProducts = true;\n      });\n    });\n  },\n  buyProducts: function buyProducts(payload, cb, timeout) {\n    return setTimeout(function () {\n      return cb();\n    }, timeout || TIMEOUT);\n  }\n};\nvar WooCommerce = new WooCommerceAPI({\n  url: wooConfig.siteUrl,\n  consumerKey: wooConfig.consumerKey,\n  consumerSecret: wooConfig.consumerSecret,\n  wpAPI: true,\n  version: \"wc/v3\"\n});\nvar ProductContext = React.createContext();\nvar pos = 1;\nvar addresses = [{\n  id: 19,\n  level: 0,\n  position: 0,\n  name: \"Product Categories\"\n}];\nvar cart = [];\nvar length = null;\n\nvar ProductProvider = /*#__PURE__*/function (_Component) {\n  _inherits(ProductProvider, _Component);\n\n  function ProductProvider(props) {\n    var _this2;\n\n    _classCallCheck(this, ProductProvider);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(ProductProvider).call(this, props));\n\n    _this2.getList = function (res) {\n      WooCommerce.getAsync(\"products?category=\".concat(res)).then(function (res) {\n        return res.toJSON().body;\n      }).then(function (json) {\n        var data = json;\n        Object.json1 = JSON.parse(data);\n        var items = Object.json1;\n        var products = [];\n        items.map(function (_ref2) {\n          var id = _ref2.id,\n              name = _ref2.name,\n              images = _ref2.images,\n              price = _ref2.price,\n              categories = _ref2.categories,\n              description = _ref2.description,\n              stock_quantity = _ref2.stock_quantity;\n          var img;\n          images.map(function (data) {\n            img = data.src;\n          });\n          var newItem = {\n            id: id,\n            title: name,\n            img: img,\n            price: parseInt(price),\n            company: \"nurumia\",\n            info: description,\n            inCart: null,\n            count: 1,\n            total: 1,\n            categories: categories,\n            stock: stock_quantity\n          };\n          products.push(newItem); // Push the object\n\n          _this2.oldProducts = true;\n        });\n\n        _this2.setState(_objectSpread({}, {\n          isListLoaded: true,\n          products: products\n        }));\n      });\n    };\n\n    _this2.getSales2 = function () {\n      WooCommerce.getAsync(\"products?on_sale=true\").then(function (res) {\n        return res.toJSON().body;\n      }).then(function (json) {\n        var data = json;\n        Object.json1 = JSON.parse(data);\n        var items = Object.json1;\n        var sales = [];\n        items.map(function (_ref3) {\n          var id = _ref3.id,\n              name = _ref3.name,\n              images = _ref3.images,\n              sale_price = _ref3.sale_price,\n              categories = _ref3.categories,\n              description = _ref3.description;\n          var img;\n          images.map(function (data) {\n            img = data.src;\n          });\n          var newItem = {\n            id: id,\n            title: name,\n            img: img,\n            price: parseInt(sale_price),\n            company: \"nurumia\",\n            info: description,\n            inCart: false,\n            count: 1,\n            total: 1,\n            categories: categories\n          };\n          sales.push(newItem); // Push the object\n        });\n\n        _this2.setState(_objectSpread({}, {\n          sales: sales\n        }));\n      });\n    };\n\n    _this2.getCategories = function (parent, level) {\n      return WooCommerce.getAsync(\"products/categories?hide_empty=false&per_page=30\".concat(parent)).then(function (res) {\n        if (res) {\n          var data = res.toJSON().body; // console.log(data)\n\n          Object.json1 = JSON.parse(data);\n          var items = Object.json1;\n          var categories = [];\n\n          if (items[0]) {\n            if (items[0].id != undefined) {\n              pos = 0;\n              items.map(function (_ref4) {\n                var id = _ref4.id,\n                    name = _ref4.name,\n                    parent = _ref4.parent;\n                var newCategory = {\n                  id: id,\n                  name: name,\n                  parent: parent,\n                  children: []\n                };\n                var addr = {\n                  id: id,\n                  level: level,\n                  position: pos,\n                  name: name\n                };\n                addresses.push(addr);\n                categories.push(newCategory); // Push the object\n\n                pos++;\n              });\n              return categories;\n            }\n          }\n        }\n      });\n    };\n\n    _this2.state = {\n      products: [],\n      sales: [],\n      tree: [],\n      tree2: [],\n      imageClicked: null,\n      categoryClicked: null,\n      detailProduct: null,\n      cart: [],\n      // preCart: [],\n      modalOpen: false,\n      modalProduct: null,\n      cartSubTotal: 0,\n      cartTax: 0,\n      cartTotal: 0,\n      isListLoaded: false,\n      isTreeLoaded: false,\n      isMenuLoaded: false\n    };\n    _this2.imageClick = _this2.imageClick.bind(_assertThisInitialized(_assertThisInitialized(_this2)));\n    _this2.categoryClick = _this2.categoryClick.bind(_assertThisInitialized(_assertThisInitialized(_this2)));\n    return _this2;\n  }\n\n  _createClass(ProductProvider, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      console.log(\"Will mount\"); // this.createTree();\n      // this.getSales();\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {//  this.getList();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.isTreeLoaded !== true) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(ProductContext.Provider, {\n          value: _objectSpread({}, this.state),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 11\n          }\n        }, \" \", this.props.children, \" \"), \" \");\n      }\n    }\n  }]);\n\n  return ProductProvider;\n}(Component);\n\nvar ProductConsumer = ProductContext.Consumer;\nexport { ProductProvider, ProductConsumer };\nexport function useProduct() {\n  return useContext(ProductContext);\n}","map":{"version":3,"sources":["/home/jarri/Desktop/projects-web/react-store/src/api/shop.js"],"names":["React","Component","useContext","_products","wooConfig","require","WooCommerceAPI","TIMEOUT","getProducts","res","WooCommerce","getAsync","then","toJSON","body","json","data","Object","json1","JSON","parse","items","products","map","id","name","images","price","categories","description","stock_quantity","img","src","newItem","title","parseInt","company","info","inCart","count","total","stock","push","oldProducts","buyProducts","payload","cb","timeout","setTimeout","url","siteUrl","consumerKey","consumerSecret","wpAPI","version","ProductContext","createContext","pos","addresses","level","position","cart","length","ProductProvider","props","getList","setState","isListLoaded","getSales2","sales","sale_price","getCategories","parent","undefined","newCategory","children","addr","state","tree","tree2","imageClicked","categoryClicked","detailProduct","modalOpen","modalProduct","cartSubTotal","cartTax","cartTotal","isTreeLoaded","isMenuLoaded","imageClick","bind","categoryClick","console","log","ProductConsumer","Consumer","useProduct"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { useContext } from \"react\";\nimport _products from \"./data.json\";\nconst wooConfig = require(\"./wooConfig\");\nconst WooCommerceAPI = require(\"woocommerce-api\");\n/**\n * Mocking client-server processing\n */\n\nconst TIMEOUT = 100;\n\nexport default {\n  //getProducts: (cb, timeout) =>\n  // setTimeout(() => cb(_products), timeout || TIMEOUT),\n  getProducts(res) {\n    WooCommerce.getAsync(`products?`)\n      .then((res) => res.toJSON().body)\n      .then((json) => {\n        var data = json;\n        Object.json1 = JSON.parse(data);\n        var items = Object.json1;\n        var products = [];\n        items.map(\n          ({\n            id,\n            name,\n            images,\n            price,\n            categories,\n            description,\n            stock_quantity,\n          }) => {\n            var img;\n            images.map((data) => {\n              img = data.src;\n            });\n\n            const newItem = {\n              id: id,\n              title: name,\n              img: img,\n              price: parseInt(price),\n              company: \"nurumia\",\n              info: description,\n              inCart: null,\n              count: 1,\n              total: 1,\n              categories: categories,\n              stock: stock_quantity,\n            };\n\n            products.push(newItem); // Push the object\n            this.oldProducts = true;\n          }\n        );\n      });\n  },\n  buyProducts: (payload, cb, timeout) =>\n    setTimeout(() => cb(), timeout || TIMEOUT),\n};\n\nconst WooCommerce = new WooCommerceAPI({\n  url: wooConfig.siteUrl,\n  consumerKey: wooConfig.consumerKey,\n  consumerSecret: wooConfig.consumerSecret,\n  wpAPI: true,\n  version: \"wc/v3\",\n});\n\nconst ProductContext = React.createContext();\n\nvar pos = 1;\n\nvar addresses = [\n  {\n    id: 19,\n    level: 0,\n    position: 0,\n    name: \"Product Categories\",\n  },\n];\nvar cart = [];\nvar length = null;\n\nclass ProductProvider extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      products: [],\n      sales: [],\n      tree: [],\n      tree2: [],\n      imageClicked: null,\n      categoryClicked: null,\n      detailProduct: null,\n      cart: [],\n      // preCart: [],\n      modalOpen: false,\n      modalProduct: null,\n      cartSubTotal: 0,\n      cartTax: 0,\n      cartTotal: 0,\n      isListLoaded: false,\n      isTreeLoaded: false,\n      isMenuLoaded: false,\n    };\n    this.imageClick = this.imageClick.bind(this);\n    this.categoryClick = this.categoryClick.bind(this);\n  }\n\n  componentWillMount() {\n    console.log(\"Will mount\");\n    // this.createTree();\n    // this.getSales();\n  }\n\n  componentDidMount() {\n    //  this.getList();\n  }\n\n  getList = (res) => {\n    WooCommerce.getAsync(`products?category=${res}`)\n      .then((res) => res.toJSON().body)\n      .then((json) => {\n        var data = json;\n        Object.json1 = JSON.parse(data);\n        var items = Object.json1;\n        var products = [];\n        items.map(\n          ({\n            id,\n            name,\n            images,\n            price,\n            categories,\n            description,\n            stock_quantity,\n          }) => {\n            var img;\n            images.map((data) => {\n              img = data.src;\n            });\n\n            const newItem = {\n              id: id,\n              title: name,\n              img: img,\n              price: parseInt(price),\n              company: \"nurumia\",\n              info: description,\n              inCart: null,\n              count: 1,\n              total: 1,\n              categories: categories,\n              stock: stock_quantity,\n            };\n\n            products.push(newItem); // Push the object\n            this.oldProducts = true;\n          }\n        );\n        this.setState({\n          ...{\n            isListLoaded: true,\n            products: products,\n          },\n        });\n      });\n  };\n\n  getSales2 = () => {\n    WooCommerce.getAsync(`products?on_sale=true`)\n      .then((res) => res.toJSON().body)\n      .then((json) => {\n        var data = json;\n        Object.json1 = JSON.parse(data);\n        var items = Object.json1;\n        var sales = [];\n        items.map(\n          ({ id, name, images, sale_price, categories, description }) => {\n            var img;\n\n            images.map((data) => {\n              img = data.src;\n            });\n            const newItem = {\n              id: id,\n              title: name,\n              img: img,\n              price: parseInt(sale_price),\n              company: \"nurumia\",\n              info: description,\n              inCart: false,\n              count: 1,\n              total: 1,\n              categories: categories,\n            };\n            sales.push(newItem); // Push the object\n          }\n        );\n\n        this.setState({\n          ...{\n            sales: sales,\n          },\n        });\n      });\n  };\n\n  getCategories = (parent, level) => {\n    return WooCommerce.getAsync(\n      `products/categories?hide_empty=false&per_page=30${parent}`\n    ).then((res) => {\n      if (res) {\n        var data = res.toJSON().body;\n        // console.log(data)\n        Object.json1 = JSON.parse(data);\n        var items = Object.json1;\n        var categories = [];\n\n        if (items[0]) {\n          if (items[0].id != undefined) {\n            pos = 0;\n\n            items.map(({ id, name, parent }) => {\n              const newCategory = {\n                id: id,\n                name: name,\n                parent: parent,\n                children: [],\n              };\n              const addr = {\n                id: id,\n                level: level,\n                position: pos,\n                name: name,\n              };\n\n              addresses.push(addr);\n              categories.push(newCategory); // Push the object\n\n              pos++;\n            });\n\n            return categories;\n          }\n        }\n      }\n    });\n  };\n\n  render() {\n    if (this.state.isTreeLoaded !== true) {\n      return (\n        <div>\n          <ProductContext.Provider\n            value={{\n              ...this.state,\n            }}\n          >\n            {\" \"}\n            {this.props.children}{\" \"}\n          </ProductContext.Provider>{\" \"}\n        </div>\n      );\n    }\n  }\n}\n\nconst ProductConsumer = ProductContext.Consumer;\n\nexport { ProductProvider, ProductConsumer };\n\nexport function useProduct() {\n  return useContext(ProductContext);\n}\n"]},"metadata":{},"sourceType":"module"}