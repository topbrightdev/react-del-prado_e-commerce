{"ast":null,"code":"import _classCallCheck from \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/src/components/collection/common/product-listing.jsx\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { getTotal, getCartProducts } from \"../../../reducers\";\nimport { addToCart, addToWishlist, addToCompare } from \"../../../actions/indexO\";\nimport { getVisibleproducts } from \"../../../services/index\";\nimport ProductListItem from \"./product-list-item\";\nvar category = null;\n\nvar ProductListing = /*#__PURE__*/function (_Component) {\n  _inherits(ProductListing, _Component);\n\n  function ProductListing(props) {\n    var _this;\n\n    _classCallCheck(this, ProductListing);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProductListing).call(this, props));\n\n    _this.fetchSameCategoryProducts = function () {\n      console.log(category);\n      console.log(_this.props);\n\n      if (_this.props.category !== _this.state.category) {\n        category = _this.props.category;\n\n        _this.setState(function () {\n          return {\n            category: category\n          };\n        });\n\n        var productsToShow = [];\n        var products = _this.props.products;\n        products.map(function (product) {\n          product.categories.map(function (productCategory) {\n            console.log(productCategory);\n            console.log(category);\n\n            if (productCategory.name === category) {\n              productsToShow.push(product);\n            }\n          });\n        });\n      }\n\n      if (_this.state.productsToShow !== productsToShow) {\n        _this.setState(function () {\n          return {\n            catproductsToShowegory: productsToShow\n          };\n        });\n      }\n\n      console.log(productsToShow);\n      category = _this.props.category;\n    };\n\n    _this.fetchMoreItems = function () {\n      if (_this.state.limit >= _this.props.products.length) {\n        _this.setState({\n          hasMoreItems: false\n        });\n\n        return;\n      } // a fake async api call\n\n\n      setTimeout(function () {\n        _this.setState({\n          limit: _this.state.limit + 5\n        });\n      }, 3000);\n    };\n\n    _this.state = {\n      limit: 5,\n      hasMoreItems: true,\n      category: null,\n      productsToShow: null\n    };\n    return _this;\n  }\n\n  _createClass(ProductListing, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.fetchMoreItems();\n\n      if (this.props.category !== this.state.category) {\n        category = this.props.category;\n        this.setState(function () {\n          return {\n            category: category\n          };\n        });\n        this.fetchSameCategoryProducts();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.props.category !== this.state.category) {\n        category = this.props.category;\n        this.setState(function () {\n          return {\n            category: category\n          };\n        });\n        this.fetchSameCategoryProducts();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          products = _this$props.products,\n          addToCart = _this$props.addToCart,\n          symbol = _this$props.symbol,\n          addToWishlist = _this$props.addToWishlist,\n          addToCompare = _this$props.addToCompare;\n      var theProducts = products;\n      {\n        if (this.state.productsToShow) {\n          theProducts = this.state.productsToShow;\n          console.log(theProducts);\n        }\n      }\n\n      if (category) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"product-wrapper-grid\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"container-fluid\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }\n        }, products.length > 0 ? /*#__PURE__*/React.createElement(InfiniteScroll, {\n          dataLength: this.state.limit //This is important field to render the next data\n          ,\n          next: this.fetchMoreItems,\n          hasMore: this.state.hasMoreItems,\n          loader: /*#__PURE__*/React.createElement(\"div\", {\n            className: \"loading-cls\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 27\n            }\n          }),\n          endMessage: /*#__PURE__*/React.createElement(\"p\", {\n            className: \"seen-cls seen-it-cls\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 21\n            }\n          }, /*#__PURE__*/React.createElement(\"b\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 23\n            }\n          }, \"Yay! You have seen it all\")),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"row\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 19\n          }\n        }, this.state.productsToShow ? this.state.productsToShow.slice(0, this.state.limit).map(function (product, index) {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            className: \"\".concat(_this2.props.colSize === 3 ? \"col-xl-3 col-md-6 col-grid-box\" : \"col-lg-\" + _this2.props.colSize),\n            key: index,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 29\n            }\n          }, /*#__PURE__*/React.createElement(ProductListItem, {\n            product: product,\n            symbol: symbol,\n            onAddToCompareClicked: function onAddToCompareClicked() {\n              return addToCompare(product);\n            },\n            onAddToWishlistClicked: function onAddToWishlistClicked() {\n              return addToWishlist(product);\n            },\n            onAddToCartClicked: addToCart,\n            key: index,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 31\n            }\n          }));\n        }) : products.slice(0, this.state.limit).map(function (product, index) {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            className: \"\".concat(_this2.props.colSize === 3 ? \"col-xl-3 col-md-6 col-grid-box\" : \"col-lg-\" + _this2.props.colSize),\n            key: index,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 29\n            }\n          }, /*#__PURE__*/React.createElement(ProductListItem, {\n            product: product,\n            symbol: symbol,\n            onAddToCompareClicked: function onAddToCompareClicked() {\n              return addToCompare(product);\n            },\n            onAddToWishlistClicked: function onAddToWishlistClicked() {\n              return addToWishlist(product);\n            },\n            onAddToCartClicked: addToCart,\n            key: index,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 31\n            }\n          }));\n        }))) : /*#__PURE__*/React.createElement(\"div\", {\n          className: \"row\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"col-sm-12 text-center section-b-space mt-5 no-found\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: \"\".concat(process.env.PUBLIC_URL, \"/assets/images/empty-search.jpg\"),\n          className: \"img-fluid mb-4\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 21\n          }\n        }), /*#__PURE__*/React.createElement(\"h3\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 21\n          }\n        }, \"Sorry! Couldn't find the product you were looking For!!!\", \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 21\n          }\n        }, \"Please check if you have misspelt something or try searching with other words.\"), /*#__PURE__*/React.createElement(Link, {\n          to: \"\".concat(process.env.PUBLIC_URL, \"/\"),\n          className: \"btn btn-solid\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 21\n          }\n        }, \"continue shopping\"))))));\n      } else {\n        return /*#__PURE__*/React.createElement(\"h6\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 14\n          }\n        }, \"Loading\");\n      }\n    }\n  }]);\n\n  return ProductListing;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    products: getVisibleproducts(state.data, state.filters),\n    data2: state.data2,\n    symbol: state.data.symbol\n  };\n};\n\nexport default connect(mapStateToProps, {\n  addToCart: addToCart,\n  addToWishlist: addToWishlist,\n  addToCompare: addToCompare\n})(ProductListing);","map":{"version":3,"sources":["/home/jarri/Desktop/projects-web/eCommerce/template-store1/src/components/collection/common/product-listing.jsx"],"names":["React","Component","connect","Link","InfiniteScroll","getTotal","getCartProducts","addToCart","addToWishlist","addToCompare","getVisibleproducts","ProductListItem","category","ProductListing","props","fetchSameCategoryProducts","console","log","state","setState","productsToShow","products","map","product","categories","productCategory","name","push","catproductsToShowegory","fetchMoreItems","limit","length","hasMoreItems","setTimeout","symbol","theProducts","slice","index","colSize","process","env","PUBLIC_URL","mapStateToProps","data","filters","data2"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {Link} from \"react-router-dom\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n\r\nimport {getTotal, getCartProducts} from \"../../../reducers\";\r\nimport {addToCart, addToWishlist, addToCompare} from \"../../../actions/indexO\";\r\nimport {getVisibleproducts} from \"../../../services/index\";\r\nimport ProductListItem from \"./product-list-item\";\r\n\r\nvar category = null;\r\n\r\nclass ProductListing extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      limit: 5,\r\n      hasMoreItems: true,\r\n      category: null,\r\n      productsToShow: null,\r\n    };\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.fetchMoreItems();\r\n    if (this.props.category !== this.state.category) {\r\n      category = this.props.category;\r\n      this.setState(() => {\r\n        return {category: category};\r\n      });\r\n      this.fetchSameCategoryProducts();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.props.category !== this.state.category) {\r\n      category = this.props.category;\r\n      this.setState(() => {\r\n        return {category: category};\r\n      });\r\n      this.fetchSameCategoryProducts();\r\n    }\r\n  }\r\n\r\n  fetchSameCategoryProducts = () => {\r\n    console.log(category);\r\n    console.log(this.props);\r\n    if (this.props.category !== this.state.category) {\r\n      category = this.props.category;\r\n      this.setState(() => {\r\n        return {category: category};\r\n      });\r\n\r\n      var productsToShow = [];\r\n      const products = this.props.products;\r\n      products.map((product) => {\r\n        product.categories.map((productCategory) => {\r\n          console.log(productCategory);\r\n          console.log(category);\r\n          if (productCategory.name === category) {\r\n            productsToShow.push(product);\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    if (this.state.productsToShow !== productsToShow) {\r\n      this.setState(() => {\r\n        return {catproductsToShowegory: productsToShow};\r\n      });\r\n    }\r\n    console.log(productsToShow);\r\n    category = this.props.category;\r\n  };\r\n\r\n  fetchMoreItems = () => {\r\n    if (this.state.limit >= this.props.products.length) {\r\n      this.setState({hasMoreItems: false});\r\n      return;\r\n    }\r\n    // a fake async api call\r\n    setTimeout(() => {\r\n      this.setState({\r\n        limit: this.state.limit + 5,\r\n      });\r\n    }, 3000);\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      products,\r\n      addToCart,\r\n      symbol,\r\n      addToWishlist,\r\n      addToCompare,\r\n    } = this.props;\r\n    var theProducts = products;\r\n    {\r\n      if (this.state.productsToShow) {\r\n        theProducts = this.state.productsToShow;\r\n        console.log(theProducts);\r\n      }\r\n    }\r\n    if (category) {\r\n      return (\r\n        <div>\r\n          <div className=\"product-wrapper-grid\">\r\n            <div className=\"container-fluid\">\r\n              {products.length > 0 ? (\r\n                <InfiniteScroll\r\n                  dataLength={this.state.limit} //This is important field to render the next data\r\n                  next={this.fetchMoreItems}\r\n                  hasMore={this.state.hasMoreItems}\r\n                  loader={<div className=\"loading-cls\"></div>}\r\n                  endMessage={\r\n                    <p className=\"seen-cls seen-it-cls\">\r\n                      <b>Yay! You have seen it all</b>\r\n                    </p>\r\n                  }\r\n                >\r\n                  <div className=\"row\">\r\n                    {this.state.productsToShow\r\n                      ? this.state.productsToShow\r\n                          .slice(0, this.state.limit)\r\n                          .map((product, index) => (\r\n                            <div\r\n                              className={`${\r\n                                this.props.colSize === 3\r\n                                  ? \"col-xl-3 col-md-6 col-grid-box\"\r\n                                  : \"col-lg-\" + this.props.colSize\r\n                              }`}\r\n                              key={index}\r\n                            >\r\n                              <ProductListItem\r\n                                product={product}\r\n                                symbol={symbol}\r\n                                onAddToCompareClicked={() =>\r\n                                  addToCompare(product)\r\n                                }\r\n                                onAddToWishlistClicked={() =>\r\n                                  addToWishlist(product)\r\n                                }\r\n                                onAddToCartClicked={addToCart}\r\n                                key={index}\r\n                              />\r\n                            </div>\r\n                          ))\r\n                      : products\r\n                          .slice(0, this.state.limit)\r\n                          .map((product, index) => (\r\n                            <div\r\n                              className={`${\r\n                                this.props.colSize === 3\r\n                                  ? \"col-xl-3 col-md-6 col-grid-box\"\r\n                                  : \"col-lg-\" + this.props.colSize\r\n                              }`}\r\n                              key={index}\r\n                            >\r\n                              <ProductListItem\r\n                                product={product}\r\n                                symbol={symbol}\r\n                                onAddToCompareClicked={() =>\r\n                                  addToCompare(product)\r\n                                }\r\n                                onAddToWishlistClicked={() =>\r\n                                  addToWishlist(product)\r\n                                }\r\n                                onAddToCartClicked={addToCart}\r\n                                key={index}\r\n                              />\r\n                            </div>\r\n                          ))}\r\n                  </div>\r\n                </InfiniteScroll>\r\n              ) : (\r\n                <div className=\"row\">\r\n                  <div className=\"col-sm-12 text-center section-b-space mt-5 no-found\">\r\n                    <img\r\n                      src={`${process.env.PUBLIC_URL}/assets/images/empty-search.jpg`}\r\n                      className=\"img-fluid mb-4\"\r\n                    />\r\n                    <h3>\r\n                      Sorry! Couldn't find the product you were looking For!!!{\" \"}\r\n                    </h3>\r\n                    <p>\r\n                      Please check if you have misspelt something or try\r\n                      searching with other words.\r\n                    </p>\r\n                    <Link\r\n                      to={`${process.env.PUBLIC_URL}/`}\r\n                      className=\"btn btn-solid\"\r\n                    >\r\n                      continue shopping\r\n                    </Link>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    } else {\r\n      return <h6>Loading</h6>;\r\n    }\r\n  }\r\n}\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    products: getVisibleproducts(state.data, state.filters),\r\n    data2: state.data2,\r\n    symbol: state.data.symbol,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n  addToCart,\r\n  addToWishlist,\r\n  addToCompare,\r\n})(ProductListing);\r\n"]},"metadata":{},"sourceType":"module"}