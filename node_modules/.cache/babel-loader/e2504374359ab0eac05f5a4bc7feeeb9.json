{"ast":null,"code":"import _regeneratorRuntime from \"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/src/components/checkout/CheckoutForm.jsx\";\nimport React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { CardNumberElement, CardExpiryElement, CardCVCElement, injectStripe } from \"react-stripe-elements\";\nimport axios from \"axios\";\nimport Button from \"@material-ui/core/Button\";\nimport { animateScroll } from \"react-scroll\";\nimport { ProductConsumer } from \"../context/productContext\";\nimport { useWoo, WooConsumer } from \"../context/wooContext\";\nimport \"../style.css\"; //4242424242424242\n\nvar send = false;\nvar email,\n    total,\n    amount = null;\nvar port = process.env.PORT || 7000;\nvar urlCharge = process.env.NODE_ENV.trim() === \"production\" ? \"https://waldenberginc.com/api/stripe/charge\" : \"http://localhost:7000/api/stripe/charge\"; //const urlCharge ='http://waldenberginc.com/api/stripe/charge'\n\nvar CheckoutForm = function CheckoutForm(_ref) {\n  var selectedProduct = _ref.selectedProduct,\n      stripe = _ref.stripe,\n      history = _ref.history;\n  if (selectedProduct === null) history.push(\"/\");\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      receiptUrl = _useState2[0],\n      setReceiptUrl = _useState2[1];\n\n  var _useWoo = useWoo(),\n      receiveReceipt = _useWoo.receiveReceipt;\n\n  animateScroll.scrollToBottom({\n    containerId: \"ContainerElementID\"\n  });\n\n  var handleSubmit =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(event) {\n      var _ref3, error, token, order;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              _context.next = 3;\n              return stripe.createToken();\n\n            case 3:\n              _ref3 = _context.sent;\n              error = _ref3.error;\n              token = _ref3.token;\n\n              if (error) {\n                console.log(error);\n              }\n\n              amount = total.toString().replace(\".\", \"\");\n              amount = \"\".concat(amount, \"00\");\n              _context.next = 11;\n              return axios.post(urlCharge, {\n                // amount: total.toString().replace(\".\", \"\"),\n                source: token.id,\n                //  receipt_email: email,\n                amount: amount,\n                receipt_email: email\n              }).catch(function (e) {\n                console.log(e);\n              });\n\n            case 11:\n              order = _context.sent;\n              setReceiptUrl(order.data.charge.receipt_url);\n              receiveReceipt(receiptUrl);\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // if (receiptUrl) {\n\n\n  if (receiptUrl) {\n    return React.createElement(\"div\", {\n      className: \"success \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \" success-form farm-19\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"success-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"Payment Successful!\"), React.createElement(\"div\", {\n      className: \"success-links\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: receiptUrl,\n      className: \"success-receipt links\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"View Receipt\"), React.createElement(Link, {\n      to: \"/\",\n      className: \"success-home links\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, \"Shop\"))));\n  }\n\n  return React.createElement(ProductConsumer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, function (value) {\n    var cart = value.cart;\n\n    if (cart.length > 0) {\n      return React.createElement(WooConsumer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, function (value) {\n        email = value.email;\n        total = value.total;\n        return React.createElement(\"div\", {\n          className: \"checkout-form farm-19\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, React.createElement(\"h6\", {\n          className: \"checkout-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }, \"Introduce your Credit Card Information\"), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, \"Amount: $\", cart[0].price), React.createElement(\"form\", {\n          onSubmit: handleSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          className: \"checkout-label-number\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, \"Card details\", React.createElement(CardNumberElement, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        })), React.createElement(\"label\", {\n          className: \"checkout-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, \"Expiration date\", React.createElement(CardExpiryElement, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        })), React.createElement(\"label\", {\n          className: \"checkout-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, \"CVC\", React.createElement(CardCVCElement, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"checkout-div-button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }, React.createElement(Button, {\n          type: \"submit\",\n          className: \"checkout-button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, \"Pay\"))));\n      });\n    }\n  });\n};\n\nexport default injectStripe(CheckoutForm);","map":{"version":3,"sources":["/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/src/components/checkout/CheckoutForm.jsx"],"names":["React","useState","Link","CardNumberElement","CardExpiryElement","CardCVCElement","injectStripe","axios","Button","animateScroll","ProductConsumer","useWoo","WooConsumer","send","email","total","amount","port","process","env","PORT","urlCharge","NODE_ENV","trim","CheckoutForm","selectedProduct","stripe","history","push","receiptUrl","setReceiptUrl","receiveReceipt","scrollToBottom","containerId","handleSubmit","event","preventDefault","createToken","error","token","console","log","toString","replace","post","source","id","receipt_email","catch","e","order","data","charge","receipt_url","value","cart","length","price"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  CardNumberElement,\n  CardExpiryElement,\n  CardCVCElement,\n  injectStripe,\n} from \"react-stripe-elements\";\nimport axios from \"axios\";\nimport Button from \"@material-ui/core/Button\";\nimport { animateScroll } from \"react-scroll\";\nimport { ProductConsumer } from \"../context/productContext\";\nimport { useWoo, WooConsumer } from \"../context/wooContext\";\n\nimport \"../style.css\";\n//4242424242424242\n\nvar send = false;\nvar email,\n  total,\n  amount = null;\nconst port = process.env.PORT || 7000;\nconst urlCharge =\n  process.env.NODE_ENV.trim() === \"production\"\n    ? `https://waldenberginc.com/api/stripe/charge`\n    : \"http://localhost:7000/api/stripe/charge\";\n//const urlCharge ='http://waldenberginc.com/api/stripe/charge'\n\nconst CheckoutForm = ({ selectedProduct, stripe, history }) => {\n  if (selectedProduct === null) history.push(\"/\");\n  const [receiptUrl, setReceiptUrl] = useState(\"\");\n  const { receiveReceipt } = useWoo();\n  animateScroll.scrollToBottom({\n    containerId: \"ContainerElementID\",\n  });\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    const { error, token } = await stripe.createToken();\n    if (error) {\n      console.log(error);\n    }\n\n    amount = total.toString().replace(\".\", \"\");\n    amount = `${amount}00`;\n\n    const order = await axios\n      .post(urlCharge, {\n        // amount: total.toString().replace(\".\", \"\"),\n        source: token.id,\n        //  receipt_email: email,\n        amount: amount,\n        receipt_email: email,\n      })\n      .catch((e) => {\n        console.log(e);\n      });\n    setReceiptUrl(order.data.charge.receipt_url);\n    receiveReceipt(receiptUrl);\n  };\n\n  // if (receiptUrl) {\n  if (receiptUrl) {\n    return (\n      <div className=\"success \">\n        <div className=\" success-form farm-19\">\n          <h2 className=\"success-text\">Payment Successful!</h2>\n          <div className=\"success-links\">\n            <a href={receiptUrl} className=\"success-receipt links\">\n              View Receipt\n            </a>\n            <Link to=\"/\" className=\"success-home links\">\n              Shop\n            </Link>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <ProductConsumer>\n      {(value) => {\n        const { cart } = value;\n        if (cart.length > 0) {\n          return (\n            <WooConsumer>\n              {(value) => {\n                email = value.email;\n                total = value.total;\n                return (\n                  <div className=\"checkout-form farm-19\">\n                    <h6 className=\"checkout-text\">\n                      Introduce your Credit Card Information\n                    </h6>\n                    <p>Amount: ${cart[0].price}</p>\n                    <form onSubmit={handleSubmit}>\n                      <div>\n                        <label className=\"checkout-label-number\">\n                          Card details\n                          <CardNumberElement />\n                        </label>\n                        <label className=\"checkout-label\">\n                          Expiration date\n                          <CardExpiryElement />\n                        </label>\n                        <label className=\"checkout-label\">\n                          CVC\n                          <CardCVCElement />\n                        </label>\n                      </div>\n                      <div className=\"checkout-div-button\">\n                        <Button type=\"submit\" className=\"checkout-button\">\n                          Pay\n                        </Button>\n                      </div>\n                    </form>\n                  </div>\n                );\n              }}\n            </WooConsumer>\n          );\n        }\n      }}\n    </ProductConsumer>\n  );\n};\n\nexport default injectStripe(CheckoutForm);\n"]},"metadata":{},"sourceType":"module"}