{"ast":null,"code":"import _regeneratorRuntime from \"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/src/components/checkout/CheckoutForm.jsx\";\nimport React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { CardNumberElement, CardExpiryElement, CardCVCElement, injectStripe } from \"react-stripe-elements\";\nimport axios from \"axios\";\nvar send = false;\nvar email,\n    total,\n    amount = null;\nvar port = process.env.PORT || 7000; //const urlCharge =\n//  process.env.NODE_ENV.trim() === \"production\"\n//   ? `https://waldenberginc.com/api/stripe/charge`\n//   : \"http://localhost:7000/api/stripe/charge\";\n//const urlCharge ='http://waldenberginc.com/api/stripe/charge'\n\nvar urlCharge = \"http://localhost:7000/stripe/charge\";\n\nvar CheckoutForm = function CheckoutForm(_ref) {\n  var selectedProduct = _ref.selectedProduct,\n      stripe = _ref.stripe,\n      history = _ref.history;\n  if (selectedProduct === null) history.push(\"/\");\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      receiptUrl = _useState2[0],\n      setReceiptUrl = _useState2[1];\n\n  var handleSubmit =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3(event) {\n      var _ref3, error, token;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              event.preventDefault();\n              console.log(event);\n              _ref3 =\n              /*#__PURE__*/\n              function () {\n                var _ref4 = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee() {\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          return _context.abrupt(\"return\", console.log(\"token\"));\n\n                        case 1:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee, this);\n                }));\n\n                return function _ref3() {\n                  return _ref4.apply(this, arguments);\n                };\n              }(), error = _ref3.error, token = _ref3.token;\n              _context3.next = 5;\n              return stripe.createToken().then(function (res) {\n                console.log(res);\n\n                var order =\n                /*#__PURE__*/\n                function () {\n                  var _ref5 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee2() {\n                    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            _context2.next = 2;\n                            return axios.post(urlCharge, {\n                              // amount: total.toString().replace(\".\", \"\"),\n                              source: token.id,\n                              //  receipt_email: email,\n                              amount: amount,\n                              receipt_email: email\n                            }).catch(function (e) {\n                              console.log(e);\n                            });\n\n                          case 2:\n                            return _context2.abrupt(\"return\", _context2.sent);\n\n                          case 3:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2, this);\n                  }));\n\n                  return function order() {\n                    return _ref5.apply(this, arguments);\n                  };\n                }();\n\n                setReceiptUrl(order.data.charge.receipt_url);\n              });\n\n            case 5:\n              if (error) {\n                console.log(error);\n              }\n\n            case 6:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // if (receiptUrl) {\n\n\n  if (receiptUrl) {\n    return React.createElement(\"div\", {\n      className: \"success \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \" success-form farm-19\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"success-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, \"Payment Successful!\"), React.createElement(\"div\", {\n      className: \"success-links\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: receiptUrl,\n      className: \"success-receipt links\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"View Receipt\"), React.createElement(Link, {\n      to: \"/\",\n      className: \"success-home links\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, \"Shop\"))));\n  }\n\n  return React.createElement(\"div\", {\n    className: \"checkout-form farm-19\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(\"h6\", {\n    className: \"checkout-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, \"Introduce your Credit Card Information\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"Amount: 1000\"), React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"checkout-label-number\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"Card details\", React.createElement(CardNumberElement, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  })), React.createElement(\"label\", {\n    className: \"checkout-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"Expiration date\", React.createElement(CardExpiryElement, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  })), React.createElement(\"label\", {\n    className: \"checkout-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"CVC\", React.createElement(CardCVCElement, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"checkout-div-button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"checkout-button\",\n    onClick: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \"Pay\"))));\n};\n\nexport default injectStripe(CheckoutForm);","map":{"version":3,"sources":["/home/jarri/Desktop/lenovo2020/projects-web/eCommerce/template-store1/src/components/checkout/CheckoutForm.jsx"],"names":["React","useState","Link","CardNumberElement","CardExpiryElement","CardCVCElement","injectStripe","axios","send","email","total","amount","port","process","env","PORT","urlCharge","CheckoutForm","selectedProduct","stripe","history","push","receiptUrl","setReceiptUrl","handleSubmit","event","preventDefault","console","log","error","token","createToken","then","res","order","post","source","id","receipt_email","catch","e","data","charge","receipt_url"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  CardNumberElement,\n  CardExpiryElement,\n  CardCVCElement,\n  injectStripe,\n} from \"react-stripe-elements\";\nimport axios from \"axios\";\n\nvar send = false;\nvar email,\n  total,\n  amount = null;\nconst port = process.env.PORT || 7000;\n//const urlCharge =\n//  process.env.NODE_ENV.trim() === \"production\"\n//   ? `https://waldenberginc.com/api/stripe/charge`\n//   : \"http://localhost:7000/api/stripe/charge\";\n//const urlCharge ='http://waldenberginc.com/api/stripe/charge'\n\nconst urlCharge = \"http://localhost:7000/stripe/charge\";\n\nconst CheckoutForm = ({ selectedProduct, stripe, history }) => {\n  if (selectedProduct === null) history.push(\"/\");\n  const [receiptUrl, setReceiptUrl] = useState(\"\");\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    console.log(event);\n    const { error, token } = async () => console.log(\"token\");\n    await stripe.createToken().then((res) => {\n      console.log(res);\n      const order = async () =>\n        await axios\n          .post(urlCharge, {\n            // amount: total.toString().replace(\".\", \"\"),\n            source: token.id,\n            //  receipt_email: email,\n            amount: amount,\n            receipt_email: email,\n          })\n          .catch((e) => {\n            console.log(e);\n          });\n      setReceiptUrl(order.data.charge.receipt_url);\n    });\n    if (error) {\n      console.log(error);\n    }\n  };\n\n  // if (receiptUrl) {\n  if (receiptUrl) {\n    return (\n      <div className=\"success \">\n        <div className=\" success-form farm-19\">\n          <h2 className=\"success-text\">Payment Successful!</h2>\n          <div className=\"success-links\">\n            <a href={receiptUrl} className=\"success-receipt links\">\n              View Receipt\n            </a>\n            <Link to=\"/\" className=\"success-home links\">\n              Shop\n            </Link>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"checkout-form farm-19\">\n      <h6 className=\"checkout-text\">Introduce your Credit Card Information</h6>\n      <p>Amount: 1000</p>\n      <form onSubmit={handleSubmit}>\n        <div>\n          <label className=\"checkout-label-number\">\n            Card details\n            <CardNumberElement />\n          </label>\n          <label className=\"checkout-label\">\n            Expiration date\n            <CardExpiryElement />\n          </label>\n          <label className=\"checkout-label\">\n            CVC\n            <CardCVCElement />\n          </label>\n        </div>\n        <div className=\"checkout-div-button\">\n          <button\n            type=\"submit\"\n            className=\"checkout-button\"\n            onClick={handleSubmit}\n          >\n            Pay\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default injectStripe(CheckoutForm);\n"]},"metadata":{},"sourceType":"module"}