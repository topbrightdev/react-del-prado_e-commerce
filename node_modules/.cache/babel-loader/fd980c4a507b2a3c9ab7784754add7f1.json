{"ast":null,"code":"import _objectSpread from \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/jarri/Desktop/projects-web/eCommerce/template-store1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this;\n\nimport React, { useState } from \"react\";\nimport { createContext, useContext } from \"react\";\nimport Login from \"../userManager/Login\";\nvar AuthContext = React.createContext();\nvar targetUrl = \"https://grassrootemarket.com/wp-json/\";\nvar urlRegister = \"wp/v2/users/register\";\nvar urlJWT = \"jwt-auth/v1/token\";\nvar userURI = targetUrl + \"wp/v2/users/me\";\n\nfunction login(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoggedIn = _useState2[0],\n      setLoggedIn = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isError = _useState4[0],\n      setIsError = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      userName = _useState6[0],\n      setUserName = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      password = _useState8[0],\n      setPassword = _useState8[1];\n\n  var _useAuth = useAuth(),\n      setAuthTokens = _useAuth.setAuthTokens;\n\n  var _useWoo = useWoo(),\n      receiveLogin = _useWoo.receiveLogin;\n\n  var referer = null;\n  var user = {\n    name: userName,\n    password: password\n  };\n\n  if (props.location.state) {\n    if (props.location.state.referer) {\n      referer = props.location.state.referer;\n    } else {\n      referer = \"/\";\n    }\n  } else {\n    referer = \"/\";\n  }\n\n  animateScroll.scrollToBottom({\n    containerId: \"ContainerElementID\"\n  });\n\n  function postLogin() {\n    return _postLogin.apply(this, arguments);\n  }\n\n  function _postLogin() {\n    _postLogin = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log(userName);\n              _context.next = 3;\n              return axios.post(\"https://grassrootemarket.com/wp-json/jwt-auth/v1/token\", {\n                username: userName,\n                password: password\n              }).then(function (result) {\n                if (result.status === 200) {\n                  setAuthTokens(result.data);\n                  receiveLogin(result.data);\n                  console.log(result.data);\n                  setLoggedIn(true);\n                } else {\n                  alert(\"error\");\n                  setIsError(true);\n                }\n              }).catch(function (e) {\n                setIsError(true);\n              });\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _postLogin.apply(this, arguments);\n  }\n}\n\nfunction AuthProvider(props) {\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      authTokens = _useState10[0],\n      setAuthTokens = _useState10[1];\n\n  var setTokens = function setTokens(data) {\n    if (data === \"error\") {\n      console.log(data);\n    }\n\n    if (data === \"logout\") {\n      setAuthTokens(null);\n    }\n\n    if (data !== null && data.username) {\n      Login.postLogin(data);\n      setAuthTokens(data);\n      localStorage.setItem(\"tokens\", JSON.stringify(data));\n    }\n\n    if (data !== null && data.user_nicename) {\n      setAuthTokens(data);\n      localStorage.setItem(\"tokens\", JSON.stringify(data));\n    }\n  };\n\n  return authTokens;\n}\n\nvar createCustomer = function createCustomer(newCustomer) {\n  if (!_this.state.email) {\n    var data = {\n      user_display_name: newCustomer.username,\n      user_email: newCustomer.email\n    };\n\n    _this.receiveLogin(data);\n  }\n\n  _this.getCustomerId(newCustomer);\n};\n\nfunction updateAccount(_x, _x2, _x3) {\n  return _updateAccount.apply(this, arguments);\n}\n\nfunction _updateAccount() {\n  _updateAccount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(id, updatedUser, updatedShipping) {\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            // First will check if user values must be modified : name /mail\n            // Check\n            console.log(id);\n            console.log(updatedUser);\n            console.log(updatedShipping);\n\n            if (!updatedUser) {\n              _context6.next = 6;\n              break;\n            }\n\n            _context6.next = 6;\n            return axios.post(\"https://grassrootemarket.com/wp-json/wp/v2/users/\".concat(id), {\n              username: updatedUser.userName,\n              mail: updatedUser.email\n            }).then(function (result) {\n              if (result.status === 200) {\n                console.log(result);\n              } else {\n                alert(\"error\");\n              }\n            }).catch(function (e) {//  setIsError(true);\n            });\n\n          case 6:\n            if (!updatedShipping) {\n              _context6.next = 9;\n              break;\n            }\n\n            _context6.next = 9;\n            return WooCommerce.putAsync(\"customers/\".concat(id), updatedShipping).then(function (response) {\n              var customer = JSON.parse(response.body);\n              console.log(customer);\n            }).catch(function (error) {});\n\n          case 9:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n  return _updateAccount.apply(this, arguments);\n}\n\nfunction updateCustomer(_x4, _x5) {\n  return _updateCustomer.apply(this, arguments);\n}\n\nfunction _updateCustomer() {\n  _updateCustomer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(id, newCustomer) {\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            console.log(id);\n            console.log(newCustomer);\n            _context7.next = 4;\n            return WooCommerce.putAsync(\"customers/\".concat(id), newCustomer).then(function (response) {\n              var customer = JSON.parse(response.body);\n              console.log(customer);\n            }).catch(function (error) {});\n\n          case 4:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n  return _updateCustomer.apply(this, arguments);\n}\n\nvar getCustomerId = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(newCustomer) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return WooCommerce.getAsync(\"customers?email=\".concat(newCustomer.email)).then(function (response) {\n              if (response) {\n                if (response.body) {\n                  var user = JSON.parse(response.body);\n                  var userId = user[0].id;\n\n                  _this.setState(function () {\n                    return _objectSpread({}, {\n                      userId: userId\n                    });\n                  });\n\n                  _this.updateCustomer(userId, newCustomer);\n                }\n              }\n            }).catch(function (error) {});\n\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function getCustomerId(_x6) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar createOrder = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _this.fillOrder();\n\n            if (!ready) {\n              _context3.next = 4;\n              break;\n            }\n\n            _context3.next = 4;\n            return WooCommerce.postAsync(\"orders\", userOrder).then(function (response) {}).catch(function (error) {});\n\n          case 4:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function createOrder() {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar fillCustomer = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(email) {\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return WooCommerce.getAsync(\"customers?email=\".concat(email)).then(function (response) {\n              if (response) {\n                if (response.body) {\n                  var res = JSON.parse(response.body);\n                  var user = res[0];\n                  console.log(user);\n\n                  _this.setState(function () {\n                    return _objectSpread({}, {\n                      userId: user.id,\n                      company: user.billing.company,\n                      name: user.billing.first_name,\n                      lastName: user.billing.last_name,\n                      address: user.billing.address_1,\n                      address2: user.billing.address_2,\n                      city: user.billing.city,\n                      state: user.billing.state,\n                      cp: user.billing.postcode,\n                      country: user.billing.country,\n                      phone: user.billing.phone\n                    });\n                  });\n                }\n              }\n            }).catch(function (error) {\n              console.log(error);\n            });\n\n          case 2:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n\n  return function fillCustomer(_x7) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nvar receiveLogin = function receiveLogin(data) {\n  console.log(data);\n\n  _this.setState(function () {\n    return _objectSpread({}, {\n      user: data.user_display_name,\n      email: data.user_email\n    });\n  });\n\n  _this.fillCustomer(data.user_email); // Also must to retrieve from wooApi the rest of information\n  // about the logged user and populate its state\n\n};\n\nvar receiveLogout = function receiveLogout(data) {\n  _this.setState(function () {\n    return _objectSpread({}, {\n      user: null,\n      order: null,\n      name: null,\n      lastName: null,\n      email: null,\n      address: null,\n      address2: null,\n      city: null,\n      state: null,\n      cp: null,\n      country: null,\n      phone: null,\n      cart: null,\n      cartSubTotal: null,\n      cartTax: null,\n      total: null\n    });\n  }); // Also must to retrieve from wooApi the rest of information\n  // about the logged user and populate its state\n\n};\n\nvar receiveSignup = function receiveSignup(data) {\n  var user = data.user;\n  var ship = data.shipping;\n\n  _this.setState(function () {\n    return _objectSpread({}, {\n      name: user.user_display_name,\n      email: user.user_email,\n      phone: ship.phone,\n      address: ship.street,\n      address2: ship.address2,\n      city: ship.city,\n      state: ship.province,\n      cp: ship.postal,\n      country: ship.country\n    });\n  });\n};\n\nfunction Signup(props) {\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      isCreated = _useState12[0],\n      setCreated = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      isError = _useState14[0],\n      setIsError = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      userName = _useState16[0],\n      setUserName = _useState16[1];\n\n  var _useState17 = useState(\"\"),\n      _useState18 = _slicedToArray(_useState17, 2),\n      userMail = _useState18[0],\n      setUserMail = _useState18[1];\n\n  var _useState19 = useState(\"\"),\n      _useState20 = _slicedToArray(_useState19, 2),\n      password = _useState20[0],\n      setUserPassword = _useState20[1];\n\n  var _useState21 = useState(\"\"),\n      _useState22 = _slicedToArray(_useState21, 2),\n      password2 = _useState22[0],\n      setUserPassword2 = _useState22[1];\n\n  var _useState23 = useState(\"\"),\n      _useState24 = _slicedToArray(_useState23, 2),\n      phone = _useState24[0],\n      setPhone = _useState24[1];\n\n  var _useState25 = useState(\"\"),\n      _useState26 = _slicedToArray(_useState25, 2),\n      realname = _useState26[0],\n      setRealname = _useState26[1];\n\n  var _useState27 = useState(\"\"),\n      _useState28 = _slicedToArray(_useState27, 2),\n      surname = _useState28[0],\n      setSurname = _useState28[1];\n\n  var _useState29 = useState(\"\"),\n      _useState30 = _slicedToArray(_useState29, 2),\n      company = _useState30[0],\n      setCompany = _useState30[1];\n\n  var _useState31 = useState(\"\"),\n      _useState32 = _slicedToArray(_useState31, 2),\n      street = _useState32[0],\n      setStreet = _useState32[1];\n\n  var _useState33 = useState(\"\"),\n      _useState34 = _slicedToArray(_useState33, 2),\n      street2 = _useState34[0],\n      setStreet2 = _useState34[1];\n\n  var _useState35 = useState(\"\"),\n      _useState36 = _slicedToArray(_useState35, 2),\n      postal = _useState36[0],\n      setPostal = _useState36[1];\n\n  var _useState37 = useState(\"\"),\n      _useState38 = _slicedToArray(_useState37, 2),\n      city = _useState38[0],\n      setCity = _useState38[1];\n\n  var _useState39 = useState(\"\"),\n      _useState40 = _slicedToArray(_useState39, 2),\n      province = _useState40[0],\n      setProvince = _useState40[1];\n\n  var _useAuth2 = useAuth(),\n      setAuthTokens = _useAuth2.setAuthTokens;\n\n  var _useWoo2 = useWoo(),\n      createCustomer = _useWoo2.createCustomer;\n\n  var referer = \"/\";\n\n  if (props.location.state) {\n    if (props.location.state.referer) {\n      referer = props.location.state.referer;\n    } else {\n      referer = \"/\";\n    }\n  } else {\n    referer = \"/\";\n  }\n\n  var user = {\n    username: userName,\n    email: userMail,\n    password: password\n  };\n  var newCustomer = {\n    email: userMail,\n    first_name: realname,\n    last_name: surname,\n    username: userName,\n    billing: {\n      first_name: realname,\n      last_name: surname,\n      company: company,\n      address_1: street,\n      address_2: street2,\n      city: city,\n      state: province,\n      postcode: postal,\n      country: \"Spain\",\n      email: userMail,\n      phone: phone\n    },\n    shipping: {\n      first_name: realname,\n      last_name: surname,\n      company: company,\n      address: street,\n      address2: street2,\n      city: city,\n      state: province,\n      cp: postal,\n      country: \"Spain\"\n    }\n  }; //var data = [user, shipping];\n\n  function createUser() {\n    return _createUser.apply(this, arguments);\n  }\n\n  function _createUser() {\n    _createUser = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      var user;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              user = JSON.stringify({\n                username: userName,\n                email: userMail,\n                password: password\n              });\n              _context5.next = 3;\n              return fetch(url + urlRegister, {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: user\n              }).catch(function (error) {\n                console.log(\"There has been a problem with your fetch operation: \" + error.message);\n              }).then(function (res) {\n                if (res) {\n                  if (res.status) {\n                    if (res.status == \"200\") {\n                      setCreated(true);\n                    } else {\n                      alert(\"error\");\n                      setIsError(true);\n                      setAuthTokens(\"error\");\n                    }\n                  }\n                }\n\n                return res.json();\n              }).then(function (res) {\n                setAuthTokens(user);\n                createCustomer(newCustomer);\n                return user.token;\n              });\n\n            case 3:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n    return _createUser.apply(this, arguments);\n  }\n}\n\nexport default {\n  login: login\n};","map":{"version":3,"sources":["/home/jarri/Desktop/projects-web/eCommerce/template-store1/src/api/user.js"],"names":["React","useState","createContext","useContext","Login","AuthContext","targetUrl","urlRegister","urlJWT","userURI","login","props","isLoggedIn","setLoggedIn","isError","setIsError","userName","setUserName","password","setPassword","useAuth","setAuthTokens","useWoo","receiveLogin","referer","user","name","location","state","animateScroll","scrollToBottom","containerId","postLogin","console","log","axios","post","username","then","result","status","data","alert","catch","e","AuthProvider","authTokens","setTokens","localStorage","setItem","JSON","stringify","user_nicename","createCustomer","newCustomer","email","user_display_name","user_email","getCustomerId","updateAccount","id","updatedUser","updatedShipping","mail","WooCommerce","putAsync","response","customer","parse","body","error","updateCustomer","getAsync","userId","setState","createOrder","fillOrder","ready","postAsync","userOrder","fillCustomer","res","company","billing","first_name","lastName","last_name","address","address_1","address2","address_2","city","cp","postcode","country","phone","receiveLogout","order","cart","cartSubTotal","cartTax","total","receiveSignup","ship","shipping","street","province","postal","Signup","isCreated","setCreated","userMail","setUserMail","setUserPassword","password2","setUserPassword2","setPhone","realname","setRealname","surname","setSurname","setCompany","setStreet","street2","setStreet2","setPostal","setCity","setProvince","createUser","fetch","url","method","headers","message","json","token"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\nimport {createContext, useContext} from \"react\";\nimport Login from \"../userManager/Login\";\nconst AuthContext = React.createContext();\n\nconst targetUrl = \"https://grassrootemarket.com/wp-json/\";\nconst urlRegister = \"wp/v2/users/register\";\nconst urlJWT = \"jwt-auth/v1/token\";\nconst userURI = targetUrl + \"wp/v2/users/me\";\n\nfunction login(props) {\n  const [isLoggedIn, setLoggedIn] = useState(false);\n  const [isError, setIsError] = useState(false);\n  const [userName, setUserName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const {setAuthTokens} = useAuth();\n  const {receiveLogin} = useWoo();\n  var referer = null;\n  var user = {\n    name: userName,\n    password: password,\n  };\n\n  if (props.location.state) {\n    if (props.location.state.referer) {\n      referer = props.location.state.referer;\n    } else {\n      referer = \"/\";\n    }\n  } else {\n    referer = \"/\";\n  }\n\n  animateScroll.scrollToBottom({\n    containerId: \"ContainerElementID\",\n  });\n\n  async function postLogin() {\n    console.log(userName);\n    await axios\n      .post(\"https://grassrootemarket.com/wp-json/jwt-auth/v1/token\", {\n        username: userName,\n        password: password,\n      })\n      .then((result) => {\n        if (result.status === 200) {\n          setAuthTokens(result.data);\n          receiveLogin(result.data);\n          console.log(result.data);\n          setLoggedIn(true);\n        } else {\n          alert(\"error\");\n          setIsError(true);\n        }\n      })\n      .catch((e) => {\n        setIsError(true);\n      });\n  }\n}\n\nfunction AuthProvider(props) {\n  const [authTokens, setAuthTokens] = useState(null);\n  const setTokens = (data) => {\n    if (data === \"error\") {\n      console.log(data);\n    }\n    if (data === \"logout\") {\n      setAuthTokens(null);\n    }\n    if (data !== null && data.username) {\n      Login.postLogin(data);\n      setAuthTokens(data);\n      localStorage.setItem(\"tokens\", JSON.stringify(data));\n    }\n\n    if (data !== null && data.user_nicename) {\n      setAuthTokens(data);\n      localStorage.setItem(\"tokens\", JSON.stringify(data));\n    }\n  };\n\n  return authTokens;\n}\n\nconst createCustomer = (newCustomer) => {\n  if (!this.state.email) {\n    const data = {\n      user_display_name: newCustomer.username,\n      user_email: newCustomer.email,\n    };\n    this.receiveLogin(data);\n  }\n  this.getCustomerId(newCustomer);\n};\n\nasync function updateAccount(id, updatedUser, updatedShipping) {\n  // First will check if user values must be modified : name /mail\n  // Check\n  console.log(id);\n  console.log(updatedUser);\n  console.log(updatedShipping);\n\n  if (updatedUser) {\n    await axios\n      .post(`https://grassrootemarket.com/wp-json/wp/v2/users/${id}`, {\n        username: updatedUser.userName,\n        mail: updatedUser.email,\n      })\n      .then((result) => {\n        if (result.status === 200) {\n          console.log(result);\n        } else {\n          alert(\"error\");\n        }\n      })\n      .catch((e) => {\n        //  setIsError(true);\n      });\n  }\n\n  if (updatedShipping) {\n    await WooCommerce.putAsync(`customers/${id}`, updatedShipping)\n      .then((response) => {\n        const customer = JSON.parse(response.body);\n        console.log(customer);\n      })\n      .catch((error) => {});\n  }\n}\n\nasync function updateCustomer(id, newCustomer) {\n  console.log(id);\n  console.log(newCustomer);\n  await WooCommerce.putAsync(`customers/${id}`, newCustomer)\n    .then((response) => {\n      const customer = JSON.parse(response.body);\n      console.log(customer);\n    })\n    .catch((error) => {});\n}\n\nconst getCustomerId = async (newCustomer) => {\n  await WooCommerce.getAsync(`customers?email=${newCustomer.email}`)\n    .then((response) => {\n      if (response) {\n        if (response.body) {\n          const user = JSON.parse(response.body);\n          const userId = user[0].id;\n          this.setState(() => {\n            return {\n              ...{\n                userId: userId,\n              },\n            };\n          });\n          this.updateCustomer(userId, newCustomer);\n        }\n      }\n    })\n    .catch((error) => {});\n};\n\nconst createOrder = async () => {\n  this.fillOrder();\n  if (ready) {\n    await WooCommerce.postAsync(\"orders\", userOrder)\n      .then((response) => {})\n      .catch((error) => {});\n  }\n};\n\nconst fillCustomer = async (email) => {\n  await WooCommerce.getAsync(`customers?email=${email}`)\n    .then((response) => {\n      if (response) {\n        if (response.body) {\n          const res = JSON.parse(response.body);\n          const user = res[0];\n          console.log(user);\n          this.setState(() => {\n            return {\n              ...{\n                userId: user.id,\n                company: user.billing.company,\n                name: user.billing.first_name,\n                lastName: user.billing.last_name,\n                address: user.billing.address_1,\n                address2: user.billing.address_2,\n                city: user.billing.city,\n                state: user.billing.state,\n                cp: user.billing.postcode,\n                country: user.billing.country,\n                phone: user.billing.phone,\n              },\n            };\n          });\n        }\n      }\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n};\n\nconst receiveLogin = (data) => {\n  console.log(data);\n  this.setState(() => {\n    return {\n      ...{\n        user: data.user_display_name,\n        email: data.user_email,\n      },\n    };\n  });\n  this.fillCustomer(data.user_email);\n  // Also must to retrieve from wooApi the rest of information\n  // about the logged user and populate its state\n};\n\nconst receiveLogout = (data) => {\n  this.setState(() => {\n    return {\n      ...{\n        user: null,\n        order: null,\n        name: null,\n        lastName: null,\n        email: null,\n        address: null,\n        address2: null,\n        city: null,\n        state: null,\n        cp: null,\n        country: null,\n        phone: null,\n        cart: null,\n        cartSubTotal: null,\n        cartTax: null,\n        total: null,\n      },\n    };\n  });\n  // Also must to retrieve from wooApi the rest of information\n  // about the logged user and populate its state\n};\n\nconst receiveSignup = (data) => {\n  const user = data.user;\n  const ship = data.shipping;\n  this.setState(() => {\n    return {\n      ...{\n        name: user.user_display_name,\n        email: user.user_email,\n        phone: ship.phone,\n        address: ship.street,\n        address2: ship.address2,\n        city: ship.city,\n        state: ship.province,\n        cp: ship.postal,\n        country: ship.country,\n      },\n    };\n  });\n};\n\nfunction Signup(props) {\n  const [isCreated, setCreated] = useState(false);\n  const [isError, setIsError] = useState(false);\n  const [userName, setUserName] = useState(\"\");\n  const [userMail, setUserMail] = useState(\"\");\n  const [password, setUserPassword] = useState(\"\");\n  const [password2, setUserPassword2] = useState(\"\");\n\n  const [phone, setPhone] = useState(\"\");\n  const [realname, setRealname] = useState(\"\");\n  const [surname, setSurname] = useState(\"\");\n  const [company, setCompany] = useState(\"\");\n  const [street, setStreet] = useState(\"\");\n  const [street2, setStreet2] = useState(\"\");\n  const [postal, setPostal] = useState(\"\");\n  const [city, setCity] = useState(\"\");\n  const [province, setProvince] = useState(\"\");\n\n  const {setAuthTokens} = useAuth();\n  const {createCustomer} = useWoo();\n\n  var referer = \"/\";\n  if (props.location.state) {\n    if (props.location.state.referer) {\n      referer = props.location.state.referer;\n    } else {\n      referer = \"/\";\n    }\n  } else {\n    referer = \"/\";\n  }\n\n  var user = {\n    username: userName,\n    email: userMail,\n    password: password,\n  };\n\n  const newCustomer = {\n    email: userMail,\n    first_name: realname,\n    last_name: surname,\n    username: userName,\n    billing: {\n      first_name: realname,\n      last_name: surname,\n      company: company,\n      address_1: street,\n      address_2: street2,\n      city: city,\n      state: province,\n      postcode: postal,\n      country: \"Spain\",\n      email: userMail,\n      phone: phone,\n    },\n    shipping: {\n      first_name: realname,\n      last_name: surname,\n      company: company,\n      address: street,\n      address2: street2,\n      city: city,\n      state: province,\n      cp: postal,\n      country: \"Spain\",\n    },\n  };\n\n  //var data = [user, shipping];\n\n  async function createUser() {\n    const user = JSON.stringify({\n      username: userName,\n      email: userMail,\n      password: password,\n    });\n\n    await fetch(url + urlRegister, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: user,\n    })\n      .catch(function(error) {\n        console.log(\n          \"There has been a problem with your fetch operation: \" + error.message\n        );\n      })\n      .then(function(res) {\n        if (res) {\n          if (res.status) {\n            if (res.status == \"200\") {\n              setCreated(true);\n            } else {\n              alert(\"error\");\n              setIsError(true);\n              setAuthTokens(\"error\");\n            }\n          }\n        }\n        return res.json();\n      })\n      .then(function(res) {\n        setAuthTokens(user);\n        createCustomer(newCustomer);\n        return user.token;\n      });\n  }\n}\n\nexport default {login};\n"]},"metadata":{},"sourceType":"module"}